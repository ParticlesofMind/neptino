<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Scene Controls</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #canvas-container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 1px solid #ccc;
            margin: 20px 0;
        }
        #test-button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        #test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Scene Controls Test</h1>
    <button id="test-button">Create Test Scene</button>
    <div id="canvas-container"></div>
    
    <script type="module">
        import { Application } from '/node_modules/pixi.js/lib/index.mjs';
        import { Scene } from '/src/scripts/coursebuilder/animation/Scene.ts';
        import { animationState } from '/src/scripts/coursebuilder/animation/animationState.ts';
        
        let app = null;
        let scene = null;
        
        async function initCanvas() {
            const container = document.getElementById('canvas-container');
            
            // Create PIXI application
            app = new Application();
            await app.init({
                width: 800,
                height: 600,
                backgroundColor: '#f0f0f0',
                antialias: true
            });
            
            // Append canvas to container
            container.appendChild(app.canvas);
            
            // Initialize animation state
            animationState.setApp(app);
            
            console.log('Canvas initialized, app:', app);
        }
        
        function createTestScene() {
            if (!app) {
                alert('Canvas not initialized yet!');
                return;
            }
            
            // Clear existing scenes
            animationState.clearScenes();
            
            // Create a test scene with some bounds
            const bounds = {
                x: 100,
                y: 100,
                width: 300,
                height: 200
            };
            
            scene = new Scene(bounds);
            scene.setLoop(false);
            scene.setDuration(3000); // 3 seconds
            
            animationState.addScene(scene);
            scene.setSelected(true);
            
            console.log('Test scene created:', bounds);
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', async () => {
            await initCanvas();
            
            document.getElementById('test-button').addEventListener('click', createTestScene);
        });
    </script>
</body>
</html>