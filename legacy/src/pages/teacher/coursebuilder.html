<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="pixi-devtools" content="enabled" />
  <title>Course Builder - Neptino</title>

  <link rel="stylesheet" href="/src/scss/main.scss" />
</head>

<body class="grid">
  <header class="grid__header header">
    <nav class="nav">
      <ul class="ul ul--header">
        <li class="ul__item">
          <button class="button button--nav" id="previous-btn" title="Previous Step">
            Previous
          </button>
        </li>

        <li class="ul__item">
          <a class="link link--header" href="/src/pages/teacher/home.html" title="Back to Home">
            <img class="logo logo--small" src="/src/assets/logo/octopus-logo.png" alt="Neptino Logo" />
          </a>
        </li>

        <li class="ul__item">
          <button class="button button--nav" id="next-btn" title="Next Step">
            Next
          </button>
        </li>
      </ul>
    </nav>
  </header>
  <main class="grid__main coursebuilder">


    <!-- Setup View -->
    <section class="coursebuilder__setup" aria-hidden="false" id="setup">
      <aside class="aside aside--main">
        
        <nav>
          <h3 class="aside__heading">SETUP</h3>
          <ul class="aside__list">
            <li class="aside__item">
              <a class="aside__link" href="#essentials" data-section="essentials">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14,2 14,8 20,8"/>
                  <line x1="16" y1="13" x2="8" y2="13"/>
                  <line x1="16" y1="17" x2="8" y2="17"/>
                  <polyline points="10,9 9,9 8,9"/>
                </svg>
                <span class="aside__text">Essentials</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#classification" data-section="classification">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 6h18"/>
                  <path d="M3 12h18"/>
                  <path d="M3 18h18"/>
                </svg>
                <span class="aside__text">Classification</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#students" data-section="students">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                <span class="aside__text">Students</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#pedagogy" data-section="pedagogy">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
                <span class="aside__text">Pedagogy</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#templates" data-section="templates">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="3" width="7" height="7"/>
                  <rect x="14" y="3" width="7" height="7"/>
                  <rect x="14" y="14" width="7" height="7"/>
                  <rect x="3" y="14" width="7" height="7"/>
                </svg>
                <span class="aside__text">Templates</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#schedule" data-section="schedule">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span class="aside__text">Schedule</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#curriculum" data-section="curriculum">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
                <span class="aside__text">Curriculum</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#generation" data-section="generation">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="4" y="4" width="16" height="16" rx="2"/>
                  <rect x="9" y="9" width="6" height="6"/>
                  <path d="M15 2v4M15 18v4M2 15h4M18 15h4M18.364 5.636l-2.828 2.828M8.464 15.536l-2.828 2.828M5.636 5.636l2.828 2.828M15.536 15.536l2.828 2.828"/>
                </svg>
                <span class="aside__text">Generation</span>
              </a>
            </li>
          </ul>
          
          <h3 class="aside__heading">PUBLISHING</h3>
          <ul class="aside__list">
            <li class="aside__item">
              <a class="aside__link" href="#course-visibility" data-section="course-visibility">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
                <span class="aside__text">Course visibility</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#marketplace" data-section="marketplace">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
                <span class="aside__text">Marketplace</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#pricing-monetization" data-section="pricing-monetization">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="12" y1="1" x2="12" y2="23"/>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
                <span class="aside__text">Pricing & Monetization</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#external-integrations" data-section="external-integrations">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                  <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                </svg>
                <span class="aside__text">External Integrations & APIs</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#communication" data-section="communication">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                <span class="aside__text">Communication</span>
              </a>
            </li>
          </ul>
          
          <h3 class="aside__heading">ENGINE</h3>
          <ul class="aside__list">
            <li class="aside__item">
              <a class="aside__link" href="#page-setup" data-section="page-setup">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <line x1="9" y1="9" x2="21" y2="9"/>
                  <line x1="9" y1="15" x2="21" y2="15"/>
                  <line x1="9" y1="21" x2="21" y2="21"/>
                  <line x1="9" y1="3" x2="9" y2="21"/>
                </svg>
                <span class="aside__text">Page Setup</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#interface" data-section="interface">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                  <line x1="8" y1="21" x2="16" y2="21"/>
                  <line x1="12" y1="17" x2="12" y2="21"/>
                </svg>
                <span class="aside__text">Interface</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#themes" data-section="themes">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
                <span class="aside__text">Themes</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#accessibility-comfort" data-section="accessibility-comfort">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                  <line x1="9" y1="9" x2="9.01" y2="9"/>
                  <line x1="15" y1="9" x2="15.01" y2="9"/>
                </svg>
                <span class="aside__text">Accessibility & Comfort</span>
              </a>
            </li>
          </ul>
          
          <h3 class="aside__heading">SETTINGS</h3>
          <ul class="aside__list">
            <li class="aside__item">
              <a class="aside__link" href="#notifications-alerts" data-section="notifications-alerts">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                  <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                </svg>
                <span class="aside__text">Notifications & Alerts</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#data-management" data-section="data-management">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                  <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                  <line x1="12" y1="22.08" x2="12" y2="12"/>
                </svg>
                <span class="aside__text">Data management & Backup</span>
              </a>
            </li>
            <li class="aside__item">
              <a class="aside__link" href="#advanced-settings" data-section="advanced-settings">
                <svg class="aside__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
                <span class="aside__text">Advanced Settings</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- Essentials Article -->
      <article id="essentials" data-course-section class="article article--essentials is-active">
        <div class="article__main">
          <form class="form form--essentials" id="course-essentials-form">
            <label class="form__label">
              Course title
              <input class="input input--text" type="text" name="course_name" id="course-name" placeholder="Enter course title" maxlength="50" required />
              <div class="card card--counter" id="title-counter">
                <span class="card--counter__number" id="title-counter-value">0 / 50</span>
              </div>
            </label>
            <label class="form__label">
              Course subtitle (optional)
              <input class="input input--text" type="text" name="course_subtitle" id="course-subtitle" placeholder="Enter course subtitle" maxlength="75" />
              <div class="card card--counter" id="subtitle-counter">
                <span class="card--counter__number" id="subtitle-counter-value">0 / 75</span>
              </div>
            </label>
            <label class="form__label">
              Course Description
              <textarea class="form__textarea" name="course_description" id="course-description" rows="4"
                placeholder="Describe what students will learn" maxlength="999" required></textarea>
              <div class="card card--counter" id="description-counter">
                <span class="card--counter__number" id="description-counter-value">0 / 999</span>
              </div>
            </label>
            <div class="form__row form__row--essentials">
              <label class="form__label" for="teacher-id">
                Teacher
                <select class="input input--select input--select--essentials" name="teacher_id" id="teacher-id" required>
                  <option value="">Select teacher...</option>
                </select>
              </label>
              <label class="form__label" for="institution">
                Institution
                <select class="input input--select input--select--essentials" name="institution" id="institution" required>
                  <option value="">Select institution...</option>
                </select>
              </label>
              <label class="form__label" for="course-language">
                Course Language
                <select class="input input--select input--select--essentials" name="course_language" id="course-language" required>
                  <option value="">Select language...</option>
                </select>
              </label>
              <label class="form__label" for="course-type">
                Course Type
                <select class="input input--select input--select--essentials" name="course_type" id="course-type" required>
                  <option value="">Select course type...</option>
                  <option value="In-person">In-person</option>
                  <option value="Online">Online</option>
                  <option value="Hybrid">Hybrid</option>
                </select>
              </label>
            </div>
            <label class="form__label form__label--file">
              Course Image
            </label>
            <div class="image-upload" id="course-image-upload">
              <input class="image-upload__input input input--file" type="file" name="course_image"
                id="course-image" accept="image/*" required aria-label="Upload course image" />
                <div class="image-upload__content" id="course-image-overlay">
                  <div class="image-upload__empty" id="course-image-empty">
                    <span class="image-upload__cta-title">Upload course image</span>
                  </div>
                  <div class="image-upload__details" id="course-image-details" hidden>
                    <div class="image-upload__thumbnail">
                      <img class="image-upload__preview" id="preview-img" src="" alt="Course preview" hidden />
                      <button class="button button--small image-upload__remove" type="button" id="remove-image"
                        aria-label="Remove course image" hidden>
                        <span aria-hidden="true">×</span>
                      </button>
                    </div>
                    <div class="image-upload__meta">
                      <span class="image-upload__label">Change course image</span>
                      <span class="image-upload__filename" id="course-image-filename" hidden></span>
                    </div>
                  </div>
                </div>
            </div>

            <div class="card card--code" id="course-code-display" hidden>
              <span class="card__label">Course ID</span>
              <span class="card__value" id="course-id-value">—</span>
              <button class="button button--subtle button--small" type="button" id="course-code-copy-btn" disabled>
                Copy
              </button>
            </div>

          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--card card--save-status" id="essentials-save-status" aria-live="polite" data-status="empty">
              <span class="card__icon" aria-hidden="true"></span>
              <span class="card__text">No data submitted yet</span>
            </div>

            <div class="article__footer-actions">
              <button class="button button--primary button--medium" type="submit" form="course-essentials-form"
                id="save-essentials-btn">
                Create Course
              </button>
            </div>
          </div>
        </footer>
      </article>

      <!-- Classification Article -->
      <article id="classification" data-course-section class="article article--classification">
        <div class="article__main article__main--classification">
          <form class="form form--classification" id="course-classification-form">
            <!-- Row 1: Preliminary -->
            <div class="classification-section classification-section--preliminary">
              <div class="classification-section__header">
                <h3 class="heading heading--h3">Preliminary</h3>
                <p class="text text--description">Age group and educational framework</p>
              </div>
              <div class="classification-section__content">
                <label class="form__label" for="class-year-select">
                  <span>Class Year</span>
                  <select class="input input--select" name="class_year" id="class-year-select" required>
                    <option value="">Loading...</option>
                  </select>
                </label>
                <label class="form__label" for="curricular-framework-select">
                  <span>Curricular Framework</span>
                  <select class="input input--select" name="curricular_framework"
                    id="curricular-framework-select" required>
                    <option value="">Loading...</option>
                  </select>
                </label>
              </div>
            </div>

            <!-- Row 2: Classification -->
            <div class="classification-section classification-section--classification">
              <div class="classification-section__header">
                <h3 class="heading heading--h3">Classification</h3>
                <p class="text text--description">Subject matter hierarchy</p>
              </div>
              <div class="classification-section__content">
                <label class="form__label" for="domain-select">
                  <span>Domain</span>
                  <span class="form__label-hint">Academic field</span>
                  <select class="input input--select" name="domain" id="domain-select" required>
                    <option value="">Loading...</option>
                  </select>
                </label>
                <label class="form__label" for="subject-select">
                  <span>Subject</span>
                  <span class="form__label-hint">Specific discipline</span>
                  <select class="input input--select" name="subject" id="subject-select" required disabled>
                    <option value="">Select domain first...</option>
                  </select>
                </label>
                <label class="form__label" for="topic-select">
                  <span>Topic</span>
                  <span class="form__label-hint">Area of study</span>
                  <select class="input input--select" name="topic" id="topic-select" required disabled>
                    <option value="">Select subject first...</option>
                  </select>
                </label>
                <label class="form__label" for="subtopic-select">
                  <span>Subtopic</span>
                  <span class="form__label-hint">Specific focus</span>
                  <select class="input input--select" name="subtopic" id="subtopic-select" disabled>
                    <option value="">Select topic first...</option>
                  </select>
                </label>
              </div>
            </div>

            <!-- Row 3: Course Sequence -->
            <div class="classification-section classification-section--sequence">
              <div class="classification-section__header">
                <h3 class="heading heading--h3">Course Sequence</h3>
                <p class="text text--description">Position within the learning pathway</p>
              </div>
              <div class="classification-section__content">
                <label class="form__label" for="previous-course-select">
                  <span>Previous Course</span>
                  <span class="form__label-hint">Course that should come before this one</span>
                  <select class="input input--select input--select--essentials" name="previous_course" id="previous-course-select">
                    <option value="">Loading courses...</option>
                  </select>
                </label>
                <label class="form__label" for="current-course-select">
                  <span>Current Course</span>
                  <span class="form__label-hint">Other courses at this level</span>
                  <select class="input input--select input--select--essentials" name="current_course" id="current-course-select">
                    <option value="">Loading courses...</option>
                  </select>
                </label>
                <label class="form__label" for="next-course-select">
                  <span>Next Course</span>
                  <span class="form__label-hint">Course that should come after this one</span>
                  <select class="input input--select input--select--essentials" name="next_course" id="next-course-select">
                    <option value="">Loading courses...</option>
                  </select>
                </label>
              </div>
            </div>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="classification-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>
      <!-- Templates Article -->
      <article id="templates" data-course-section class="article article--templates">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <div class="template-config__actions">
              <button type="button" class="button button--primary" id="create-template-btn">
                Create Template
              </button>
              <button type="button" class="button button--outline" id="load-template-btn">
                Load Template
              </button>
            </div>
            <div id="template-config-content" class="template-config__content">
              <p class="placeholder">Select or create a template to configure its settings.</p>
            </div>
          </section>

          <section class="article__preview">
            <div id="template-preview-content">
              <p class="placeholder">Create a new template or select an existing one to see the preview here.</p>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="templates-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>
      <!-- Schedule Article -->
      <article id="schedule" data-course-section class="article article--schedule">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <form class="form form--schedule" id="schedule-config">
              <div class="form__row form__row--dates">
                <label class="form__label">
                  Start Date
                  <input class="input input--date" type="text" id="start-date" placeholder="DD.MM.YYYY" inputmode="numeric" autocomplete="off" required />
                </label>
                <label class="form__label">
                  End Date
                  <input class="input input--date" type="text" id="end-date" placeholder="DD.MM.YYYY" inputmode="numeric" autocomplete="off" required />
                </label>
              </div>

              <fieldset class="schedule__days" aria-label="Days of the Week">
                <legend class="form__label">Days of the Week</legend>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="monday">
                  Mon
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="tuesday">
                  Tue
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="wednesday">
                  Wed
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="thursday">
                  Thu
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="friday">
                  Fri
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="saturday">
                  Sat
                </button>
                <button class="button button--outline button--small schedule__days__button" type="button"
                  data-day="sunday">
                  Sun
                </button>
              </fieldset>

              <div class="form__row form__row--times">
                <label class="form__label">
                  Start Time
                  <input class="input input--time" type="text" id="start-time" placeholder="HH:MM" inputmode="numeric" autocomplete="off" required />
                </label>
                <label class="form__label">
                  End Time
                  <input class="input input--time" type="text" id="end-time" placeholder="HH:MM" inputmode="numeric" autocomplete="off" required />
                </label>
              </div>

              <div class="schedule__breaks">
                <div class="form__label">Break Times</div>
                <div class="schedule__breaks__list" id="break-times-list">
                  <!-- Break time inputs will be dynamically added here -->
                </div>
                <button class="button button--primary button--small schedule__break-add-standalone" type="button" id="add-break-time-btn">
                  +
                </button>
              </div>

              <div class="schedule__actions button-group">
                <button class="button button--primary" type="button" id="schedule-course-btn" disabled>
                  Schedule Course
                </button>
                <button class="button button--delete" type="button" id="delete-schedule-btn" style="display: none;">
                  Delete Schedule
                </button>
              </div>
            </form>
          </section>

          <section class="article__preview">
            <div class="schedule__preview" id="schedule-preview">
              <div class="schedule__content">
                <p class="placeholder">Click "Schedule Course" to generate your lesson schedule</p>
              </div>
              <p class="schedule__total">Total lessons: 0</p>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="schedule-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>
      <!-- Curriculum Article -->
      <article id="curriculum" data-course-section class="article article--curriculum article--templates">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <form class="form form--curriculum">

            <!-- Module Organization -->
            <div class="curriculum-config__group curriculum-config__group--modules">
              <h3 class="heading heading--h3">Module Organization</h3>
            
              <div class="module-organization-options">
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="module-organization" value="linear" id="module-org-linear" checked>
                  <div class="card__content">
                    <span class="card__title">No Modules</span>
                    <span class="card__description">Lessons appear in a single list with no module grouping.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="module-organization" value="equal" id="module-org-equal">
                  <div class="card__content">
                    <span class="card__title">Equal Modules</span>
                    <span class="card__description">Lessons are evenly distributed across modules of equal size.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="module-organization" value="custom" id="module-org-custom">
                  <div class="card__content">
                    <span class="card__title">Custom Modules</span>
                    <span class="card__description">Define your own module boundaries.</span>
                  </div>
                </label>
              </div>
              
              <!-- Custom Module Configuration -->
              <div class="custom-modules-config disabled" id="custom-modules-config">
                <div class="custom-modules-list" id="custom-modules-list">
                  <!-- Module rows will be dynamically generated -->
                </div>
              </div>
            </div>

            <!-- Content Volume -->
            <div class="curriculum-config__group curriculum-config__group--content-volume">
              <h3 class="heading heading--h3">Content Volume</h3>
              <div class="content-volume-options">
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="content-volume" value="mini" data-duration="mini" data-max="30">
                  <div class="card__content">
                    <span class="card__title">Mini</span>
                    <span class="card__meta">≤ 30 min</span>
                    <span class="card__description">Short session with 1–2 topics and light tasks.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="content-volume" value="single" data-duration="single" data-max="60" checked>
                  <div class="card__content">
                    <span class="card__title">Standard</span>
                    <span class="card__meta">≤ 60 min</span>
                    <span class="card__description">Normal lesson with balanced topics and tasks.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="content-volume" value="double" data-duration="double" data-max="120">
                  <div class="card__content">
                    <span class="card__title">Extended</span>
                    <span class="card__meta">≤ 120 min</span>
                    <span class="card__description">Double-length lesson with more practice and discussion.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="content-volume" value="triple" data-duration="triple" data-max="180">
                  <div class="card__content">
                    <span class="card__title">Intensive</span>
                    <span class="card__meta">≤ 180 min</span>
                    <span class="card__description">Long block for deeper coverage or projects.</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="content-volume" value="halfFull" data-duration="halfFull" data-max="999">
                  <div class="card__content">
                    <span class="card__title">Full Day</span>
                    <span class="card__meta">> 180 min</span>
                    <span class="card__description">Workshop-style session with multiple breaks or modules.</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Numeric Structure Fields -->
            <div class="curriculum-config__group curriculum-config__group--structure">
              <p class="text text--help">
                Fine-tune the content density for each lesson.
              </p>

              <div class="structure-inputs">
                <label class="form__label">
                  Topics per lesson
                  <input class="input input--number" type="number" min="1" max="10" value="2" id="curriculum-topics" />
                </label>

                <label class="form__label">
                  Objectives per topic
                  <input class="input input--number" type="number" min="1" max="5" value="2" id="curriculum-objectives" />
                </label>

                <label class="form__label">
                  Tasks per objective
                  <input class="input input--number" type="number" min="1" max="5" value="2" id="curriculum-tasks" />
                </label>
              </div>
            </div>

            <!-- Course Type -->
            <div class="curriculum-config__group curriculum-config__group--course-type">
              <h3 class="heading heading--h3">Course Type</h3>
            
              <div class="course-type-options">
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="course-type" value="minimalist" id="course-type-minimalist">
                  <div class="card__content">
                    <span class="card__title">Minimalist Course</span>
                    <span class="card__description">Core instructional templates only</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="course-type" value="essential" id="course-type-essential" checked>
                  <div class="card__content">
                    <span class="card__title">Essential Course</span>
                    <span class="card__description">All Minimalist templates plus evaluation and certification</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="course-type" value="complete" id="course-type-complete">
                  <div class="card__content">
                    <span class="card__title">Complete Course</span>
                    <span class="card__description">Every available template included</span>
                  </div>
                </label>
                
                <label class="card card--option">
                  <input class="input input--radio" type="radio" name="course-type" value="custom" id="course-type-custom">
                  <div class="card__content">
                    <span class="card__title">Custom Course</span>
                    <span class="card__description">Manually select any combination of templates</span>
                    <p class="card__description">Configure template placements below</p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Template Placement Section -->
            <div class="curriculum-config__group curriculum-config__group--templates">
              <h3 class="heading heading--h3">Template Placement</h3>
              <div class="template-placement" id="curriculum-template-placement-list">
                <!-- Template placement cards will be rendered here by JavaScript -->
              </div>
            </div>

            </form>
          </section>

          <section class="article__preview">
            <div class="curriculum__preview" id="curriculum-preview">
             
              <div class="curriculum__preview-content">
           
                <div class="editable-surface" aria-live="polite">
                  <!-- Dynamic content -->
                </div>
              </div>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="curriculum-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Generation Article -->
      <article id="generation" data-course-section class="article article--generation article--templates">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <form class="form form--generation" id="generation-settings-form">

            <!-- AI Generation Section -->
            <div class="curriculum-config__group curriculum-config__group--ai-generation">
              <h3 class="heading heading--h3">Generate Curriculum Content</h3>
              <div class="ai-generation__context">                
                <div class="ai-generation__context-checkboxes">
                  <!-- Mandatory Context -->
                  <div class="ai-generation__context-section">
                    <h5 class="heading heading--h5">Required Context</h5>
                    <label class="checkbox-label checkbox-label--disabled">
                      <input type="checkbox" name="ai-context-essentials" checked disabled>
                      <span>Course Essentials</span>
                    </label>
                    <label class="checkbox-label checkbox-label--disabled">
                      <input type="checkbox" name="ai-context-classification" checked disabled>
                      <span>Classification</span>
                    </label>
                    <label class="checkbox-label checkbox-label--disabled">
                      <input type="checkbox" name="ai-context-pedagogy" checked disabled>
                      <span>Pedagogy Approach</span>
                    </label>
                  </div>

                  <!-- Optional Context -->
                  <div class="ai-generation__context-section">
                    <h5 class="heading heading--h5">Optional Context</h5>
                    <label class="checkbox-label">
                      <input type="checkbox" name="ai-context-schedule" checked>
                      <span>Schedule Settings</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="ai-context-structure" checked>
                      <span>Content Structure</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="ai-context-existing">
                      <span>Existing Curriculum Content</span>
                    </label>
                  </div>

                  <!-- Generation Actions -->
                  <div class="ai-generation__context-section">
                    <h5 class="heading heading--h5">Generation Actions</h5>
                    <div class="ai-generation__buttons">
                      <button type="button" class="button button--primary" data-ai-generate="all">
                        Generate All
                      </button>
                      <button type="button" class="button button--outline" data-ai-generate="modules">
                        Generate Module Names
                      </button>
                      <button type="button" class="button button--outline" data-ai-generate="lessons">
                        Generate Lesson Names
                      </button>
                      <button type="button" class="button button--outline" data-ai-generate="topics">
                        Generate Topic Titles
                      </button>
                      <button type="button" class="button button--outline" data-ai-generate="objectives">
                        Generate Objectives
                      </button>
                      <button type="button" class="button button--outline" data-ai-generate="tasks">
                        Generate Tasks
                      </button>
                    </div>

                    <!-- Status Display -->
                    <div class="ai-generation__status" id="ai-generation-status" style="display: none;">
                      <div class="ai-generation__status-content">
                        <div class="spinner"></div>
                        <span class="ai-generation__status-text">Initializing AI model...</span>
                      </div>
                      <div class="ai-generation__progress-bar">
                        <div class="ai-generation__progress-fill" style="width: 0%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            </form>
          </section>

          <section class="article__preview">
            <div class="curriculum__preview" id="generation-preview">
        
              <div class="curriculum__preview-content">
                <nav class="curriculum__controls" aria-label="Generation view modes">
                  <button class="button button--small button--outline" type="button" data-mode="modules">
                    Modules
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="titles">
                    Lessons
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="competencies">
                    Competencies
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="topics">
                    Topics
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="objectives">
                    Objectives
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="tasks">
                    Tasks
                  </button>
                  <button class="button button--small button--outline" type="button" data-mode="all">
                    All
                  </button>
                </nav>

                <div class="editable-surface" aria-live="polite">
                  <!-- Dynamic content -->
                </div>
              </div>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="generation-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Settings Article -->
      <article id="settings" data-course-section class="article article--settings">
        <div class="article__main">
          <p class="placeholder">General settings content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="general-settings-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>
      <!-- Marketplace Article -->

      <article id="marketplace" data-course-section class="article article--marketplace">
        <div class="article__main">
          <form class="form form--marketplace" id="marketplace-form">
            <label class="form__label">
              Listing Status
              <select class="input input--select" name="listing_status" required>
                <option value="draft">Draft</option>
                <option value="pending">Pending Review</option>
                <option value="published">Published</option>
              </select>
            </label>
            <label class="form__label">
              Target Audience
              <input class="input" type="text" name="target_audience" placeholder="e.g., Grade 11 Humanities" />
            </label>
            <label class="form__label">
              Revenue Share (%)
              <input class="input" type="number" name="revenue_share" min="0" max="100" step="1" placeholder="30" />
            </label>
            <label class="form__label">
              Distribution Channels
              <textarea class="input input--textarea" name="distribution_channels" placeholder="List marketplaces or partner channels"></textarea>
            </label>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="marketplace-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Resources Article -->
      <article id="resources" data-course-section class="article article--resources">
        <div class="article__main">
          <form class="form form--resources" id="resources-form">
            <label class="form__label">
              Resource Policy
              <textarea class="input input--textarea" name="resource_policy" placeholder="Describe how resources should be used or shared."></textarea>
            </label>
            <label class="form__label form__label--checkbox">
              <input class="input input--checkbox" type="checkbox" name="allow_student_uploads" />
              Allow students to upload resources
            </label>
            <label class="form__label">
              Default Storage Provider
              <select class="input input--select" name="default_storage_provider">
                <option value="internal">Neptino Storage</option>
                <option value="google-drive">Google Drive</option>
                <option value="dropbox">Dropbox</option>
              </select>
            </label>
            <label class="form__label">
              Featured Resources (comma separated)
              <input class="input" type="text" name="featured_resources" placeholder="Intro deck, syllabus, reading list" />
            </label>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="resources-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Students Article -->
      <article id="students" data-course-section class="article article--students">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config students__config" aria-labelledby="students-roster-title">
            <div class="students__options">
              <button class="button button--primary button--medium students__trigger" type="button"
                data-modal-target="students-upload-modal" id="students-upload-btn">
                Upload students
              </button>

              <label class="form__label students__option" for="students-manual-entry-toggle">
                <input class="input input--radio" type="radio" id="students-manual-entry-toggle" name="students-method" value="manual-entry" />
                <span>Manual Entry</span>
              </label>
            </div>

            <form class="form form--students" id="students-form">
              <div class="students__feedback" id="students-feedback" role="alert" aria-live="assertive" hidden></div>
            </form>
          </section>

          <section class="article__preview students__preview" aria-labelledby="students-preview-title">
          <div class="students__list-wrapper" role="region" aria-live="polite" aria-busy="false"
            aria-describedby="students-preview-empty">
            <div class="students__list" id="students-preview-list">
              <div class="students__list-header">
                <div class="students__list-header-cell">First name</div>
                <div class="students__list-header-cell">Last name</div>
                <div class="students__list-header-cell">Email</div>
                <div class="students__list-header-cell">Student ID</div>
              </div>
              <div class="students__list-body" id="students-preview-body">
                <div class="students__preview-empty" id="students-preview-empty">
                  No roster loaded yet. Upload or enter students to generate a preview.
                </div>
              </div>
            </div>
          </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="students-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <article class="modal modal--coursebuilder modal--students" id="students-upload-modal" aria-hidden="true"
        role="dialog" aria-labelledby="students-upload-title" aria-modal="true">
        <div class="modal__content">
          <section class="students-upload__mapping" id="students-mapping" hidden aria-live="polite">
            <div class="students-upload__mapping-grid" id="students-mapping-grid" role="group"
              aria-describedby="students-mapping-support">
              <!-- Mapping controls injected by studentsUploadManager.ts -->
            </div>
            <p class="students-upload__mapping-support" id="students-mapping-support">
              Required: First name and Last name. Optional fields improve personalised pathways.
            </p>
          </section>

          <form class="form form--students-upload modal__body" id="students-upload-form" novalidate>
            <fieldset class="students-upload__fieldset">
              <legend class="students-upload__legend">Upload file</legend>
              <label class="form__label" for="students-upload-input">
                Select roster file
                <input class="input input--file" type="file" id="students-upload-input" name="rosterFile"
                  accept=".csv,.tsv,.xls,.xlsx,.ods,.pdf,.docx,.doc,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/csv"
                  aria-describedby="students-upload-help" />
              </label>
              <p class="students-upload__hint" id="students-upload-help">
                Supported formats: Excel (XLSX), CSV, PDF, Word (DOCX)
              </p>
            </fieldset>

            <div class="students-upload__feedback" id="students-upload-feedback" role="alert" hidden></div>

            <footer class="modal__footer">
              <div class="students-upload__status" aria-live="assertive" id="students-upload-status" hidden>
                <span class="students-upload__spinner" aria-hidden="true"></span>
                <span class="students-upload__status-text">Processing roster…</span>
              </div>
              <button class="button button--outline" type="button" data-modal-close="students-upload-modal">
                Cancel
              </button>
              <button class="button button--primary" type="submit" id="students-upload-submit-btn" disabled>
                Import Students
              </button>
            </footer>
          </form>
        </div>
      </article>

      <article class="modal modal--coursebuilder modal--students" id="students-manual-modal" aria-hidden="true"
        role="dialog" aria-labelledby="students-manual-title" aria-modal="true">
        <div class="modal__content">
          <header class="modal__header">
            <h2 class="modal__title" id="students-manual-title">Manual student entry</h2>
            <button class="button button--subtle button--small modal__close" type="button"
              data-modal-close="students-manual-modal" aria-label="Close manual entry modal">
              &times;
            </button>
          </header>
          <form class="form form--students-manual modal__body" id="students-manual-form" novalidate>
            <fieldset class="students-manual__fieldset">
              <legend class="students-manual__legend">Single student</legend>
              <div class="students-manual__grid">
                <label class="form__label" for="manual-first-name">
                  First name*
                  <input class="input input--text" type="text" id="manual-first-name" name="first_name" autocomplete="given-name"
                    required />
                </label>
                <label class="form__label" for="manual-last-name">
                  Last name*
                  <input class="input input--text" type="text" id="manual-last-name" name="last_name" autocomplete="family-name"
                    required />
                </label>
                <label class="form__label" for="manual-email">
                  Email
                  <input class="input input--email" type="email" id="manual-email" name="email"
                    placeholder="learner@school.org (optional)" autocomplete="email" />
                </label>
                <label class="form__label" for="manual-student-id">
                  Student ID
                  <input class="input input--text" type="text" id="manual-student-id" name="student_id"
                    placeholder="Auto-generated if blank" />
                </label>
                <label class="form__label" for="manual-grade-level">
                  Grade level
                  <select class="input input--select" id="manual-grade-level" name="grade_level">
                    <option value="">Select grade level</option>
                    <option value="Elementary">Elementary</option>
                    <option value="Middle">Middle</option>
                    <option value="High School">High School</option>
                    <option value="Undergraduate">Undergraduate</option>
                    <option value="Professional">Professional</option>
                  </select>
                </label>
                <label class="form__label" for="manual-enrollment-date">
                  Enrollment date
                  <input class="input input--date" type="date" id="manual-enrollment-date" name="enrollment_date" />
                </label>
                <label class="form__label form__label--stacked" for="manual-learning-style">
                  Learning style preferences
                  <input class="input input--text" type="text" id="manual-learning-style" name="learning_style"
                    placeholder="e.g., Visual, Collaborative" />
                </label>
                <label class="form__label form__label--stacked" for="manual-assessment-score">
                  Initial assessment score
                  <input class="input input--number" type="number" step="0.1" id="manual-assessment-score" name="assessment_score"
                    placeholder="Optional score" />
                </label>
                <label class="form__label form__label--stacked" for="manual-notes">
                  Custom notes
                  <textarea class="form__textarea" id="manual-notes" name="notes" rows="3"
                    placeholder="Pedagogy flags like ‘needs extra simulations’"></textarea>
                </label>
              </div>
            </fieldset>

            <fieldset class="students-manual__fieldset">
              <legend class="students-manual__legend">Bulk entry</legend>
              <p class="students-manual__bulk-hint">
                Paste CSV-style rows (First name, Last name, Email, Student ID, Grade level, Learning style,
                Assessment score, Enrollment date, Notes). Missing optional fields will fall back to defaults.
              </p>
              <label class="form__label form__label--stacked" for="manual-bulk-input">
                Bulk students
                <textarea class="form__textarea" id="manual-bulk-input"
                  name="bulk_students" rows="6"
                  placeholder="Jane,Doe,jane@school.org,12345,High School,Visual,88,2024-08-24,Loves experiments">
                </textarea>
              </label>
            </fieldset>

            <div class="students-manual__feedback" id="students-manual-feedback" role="alert" hidden></div>

            <footer class="modal__footer">
              <div class="students-manual__status" aria-live="assertive" id="students-manual-status" hidden>
                <span class="students-manual__spinner" aria-hidden="true"></span>
                <span class="students-manual__status-text">Saving students…</span>
              </div>
              <button class="button button--outline" type="button" data-modal-close="students-manual-modal">
                Cancel
              </button>
              <button class="button button--primary" type="submit" id="students-manual-submit-btn">
                Save Students
              </button>
            </footer>
          </form>
        </div>
      </article>

      <!-- Pedagogy Article -->
      <article id="pedagogy" data-course-section class="article article--pedagogy article--templates">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <form class="form form--pedagogy" id="course-pedagogy-form">
            <input type="hidden" name="course_pedagogy" id="course-pedagogy-input" />

            <div class="learning-plane" id="pedagogy-ui">
              <figure class="learning-plane__grid" role="application" aria-label="Pedagogical coordinate plane"
                tabindex="0">
                <span class="learning-plane__axis learning-plane__axis--left">Essentialist</span>
                <span class="learning-plane__axis learning-plane__axis--right">Progressive</span>
                <span class="learning-plane__axis learning-plane__axis--top">Constructivist</span>
                <span class="learning-plane__axis learning-plane__axis--bottom">Behaviorist</span>
                <span class="learning-plane__marker" id="pedagogy-marker" aria-hidden="true"></span>
              </figure>

              <div class="learning-plane__coords-container">
                <p class="learning-plane__coord">
                  <span class="learning-plane__coord-label">X</span>
                  <output class="learning-plane__coord-value" id="pedagogy-x">0</output>
                </p>
                <p class="learning-plane__coord">
                  <span class="learning-plane__coord-label">Y</span>
                  <output class="learning-plane__coord-value" id="pedagogy-y">0</output>
                </p>
              </div>

              <menu class="learning-plane__presets button-group" aria-label="Preset positions">
                <button type="button" class="button button--preset" data-x="-75" data-y="-75">Traditional</button>
                <button type="button" class="button button--preset" data-x="75" data-y="75">Progressive</button>
                <button type="button" class="button button--preset" data-x="-25" data-y="75">Guided Discovery</button>
                <button type="button" class="button button--preset" data-x="0" data-y="0">Balanced</button>
              </menu>
            </div>

            </form>
          </section>

          <section class="article__preview">
            <div class="learning-plane__summary">
              <h3 class="learning-plane__summary-title" id="pedagogy-approach-title">Balanced</h3>
              <p class="learning-plane__summary-subtitle" id="pedagogy-approach-subtitle">
                <em>Essentialist × Behaviorist ↔ Progressive × Constructivist</em>
              </p>
              <p class="learning-plane__summary-description" id="pedagogy-approach-desc">
                A balanced blend of teacher guidance, student agency, and mixed knowledge construction.
              </p>

              <div class="learning-plane__effects-section">
                <h4 class="learning-plane__effects-title">Effects</h4>
                <ul class="learning-plane__effects-list" id="pedagogy-effects-list">
                  <!-- Dynamic bullets injected by script -->
                </ul>
              </div>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="pedagogy-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Course Visibility Article -->
      <article id="course-visibility" data-course-section class="article article--course-visibility">
        <div class="article__main">
          <form class="form form--course-visibility settings__section" id="course-visibility-form">
            <fieldset class="settings__checkboxes">
              <label class="form__label">
                <input class="input input--checkbox" type="checkbox" name="course_visible" />
                Course visible to students
              </label>

              <label class="form__label">
                <input class="input input--checkbox" type="checkbox" name="allow_enrollment" />
                Allow new enrollments
              </label>

              <label class="form__label">
                <input class="input input--checkbox" type="checkbox" name="require_approval" />
                Require enrollment approval
              </label>

              <label class="form__label">
                <input class="input input--checkbox" type="checkbox" name="enable_notifications" />
                Enable email notifications for new enrollments
              </label>

              <label class="form__label">
                <input class="input input--checkbox" type="checkbox" name="public_course" />
                Make course publicly discoverable
              </label>
            </fieldset>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="course-visibility-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Pricing & Monetization Article -->
      <article id="pricing-monetization" data-course-section class="article article--pricing-monetization">
        <div class="article__main">
          <form class="form form--pricing" id="pricing-monetization-form">
            <label class="form__label">
              Pricing Model
              <select class="input input--select" name="pricing_model">
                <option value="free">Free</option>
                <option value="subscription">Subscription</option>
                <option value="one-time">One-time purchase</option>
                <option value="license">Site license</option>
              </select>
            </label>
            <label class="form__label">
              Base Price
              <input class="input" type="number" name="base_price" min="0" step="1" placeholder="99" />
            </label>
            <label class="form__label">
              Currency
              <select class="input input--select" name="currency">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
              </select>
            </label>
            <label class="form__label form__label--checkbox">
              <input class="input input--checkbox" type="checkbox" name="trial_available" />
              Offer free trial
            </label>
            <label class="form__label">
              Discount Notes
              <textarea class="input input--textarea" name="discount_notes" placeholder="Describe educator or early-bird discounts"></textarea>
            </label>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="pricing-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- External Integrations & APIs Article -->
      <article id="external-integrations" data-course-section class="article article--external-integrations">
        <div class="article__main">
          <form class="form form--integrations" id="external-integrations-form">
            <label class="form__label">
              LMS Provider
              <select class="input input--select" name="lms_provider">
                <option value="None">None</option>
                <option value="Canvas">Canvas</option>
                <option value="Moodle">Moodle</option>
                <option value="Schoology">Schoology</option>
              </select>
            </label>
            <label class="form__label form__label--checkbox">
              <input class="input input--checkbox" type="checkbox" name="api_access" />
              Enable API access for this course
            </label>
            <label class="form__label">
              Webhook URL
              <input class="input" type="text" name="webhook_url" placeholder="https://example.com/webhook" />
            </label>
            <label class="form__label">
              Integration Notes
              <textarea class="input input--textarea" name="integration_notes" placeholder="Describe external automation related to this course"></textarea>
            </label>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="integrations-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Communication Article -->
      <article id="communication" data-course-section class="article article--communication">
        <div class="article__main">
          <form class="form form--communication" id="communication-form">
            <label class="form__label">
              Welcome Message
              <textarea class="input input--textarea" name="welcome_message" placeholder="Send a short welcome note to enrolled students"></textarea>
            </label>
            <label class="form__label">
              Announcement Channel
              <select class="input input--select" name="announcement_channel">
                <option value="email">Email</option>
                <option value="in-app">In-app</option>
                <option value="sms">SMS</option>
              </select>
            </label>
            <label class="form__label form__label--checkbox">
              <input class="input input--checkbox" type="checkbox" name="enable_updates" />
              Enable weekly update digest
            </label>
            <label class="form__label">
              Office Hours
              <input class="input" type="text" name="office_hours" placeholder="Thursdays 3-5pm CET" />
            </label>
          </form>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="communication-save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Page Setup Article -->
      <article id="page-setup" data-course-section class="article article--page-setup article--page-setup">
        <div class="article__main article__main--panels">
          <div class="article__view-toggle">
            <button type="button" class="button button--outline article__view-toggle-btn is-active" data-view="config">
              Config
            </button>
            <button type="button" class="button button--outline article__view-toggle-btn" data-view="preview">
              Preview
            </button>
          </div>
          <section class="article__config">
            <form class="form form--page-setup" id="page-setup-form">
            <fieldset class="page-setup__section page-setup__unit-options">
              <legend class="page-setup__label">Units</legend>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="units" value="cm" checked />
                Metric (cm)
              </label>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="units" value="inches" />
                Imperial (inches)
              </label>
            </fieldset>

            <fieldset class="page-setup__section page-setup__orientation-options">
              <legend class="page-setup__label">Orientation</legend>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="orientation" value="portrait" checked />
                Portrait
              </label>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="orientation" value="landscape" />
                Landscape
              </label>
            </fieldset>

            <fieldset class="page-setup__section page-setup__size-options">
              <legend class="page-setup__label">Canvas Size</legend>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="canvas-size" value="a4" checked />
                <span class="canvas-size-label" data-cm="A4 (21.0 × 29.7 cm)"
                  data-inches="A4 (8.27&quot; × 11.69&quot;)">A4 (21.0 × 29.7 cm)</span>
              </label>
              <label class="page-setup__option">
                <input class="input input--radio" type="radio" name="canvas-size" value="us-letter" />
                <span class="canvas-size-label" data-cm="US Letter (21.6 × 27.9 cm)"
                  data-inches="US Letter (8.5&quot; × 11&quot;)">US Letter (21.6 × 27.9 cm)</span>
              </label>
            </fieldset>

            <fieldset class="page-setup__section">
              <legend class="page-setup__label">Margins</legend>
              <div class="page-setup__margins">
                <div class="page-setup__margin-group">
                  <label class="page-setup__margin">
                    Top
                    <input class="input input--number" type="number" name="margin_top" value="2.54" step="0.01" min="0"
                      max="100" />
                    <span class="page-setup__unit">cm</span>
                  </label>
                  <label class="page-setup__margin">
                    Bottom
                    <input class="input input--number" type="number" name="margin_bottom" value="2.54" step="0.01"
                      min="0" max="100" />
                    <span class="page-setup__unit">cm</span>
                  </label>
                </div>
                <div class="page-setup__margin-group">
                  <label class="page-setup__margin">
                    Left
                    <input class="input input--number" type="number" name="margin_left" value="2.54" step="0.01" min="0"
                      max="100" />
                    <span class="page-setup__unit">cm</span>
                  </label>
                  <label class="page-setup__margin">
                    Right
                    <input class="input input--number" type="number" name="margin_right" value="2.54" step="0.01"
                      min="0" max="100" />
                    <span class="page-setup__unit">cm</span>
                  </label>
                </div>
              </div>
            </fieldset>
            </form>
          </section>

          <section class="article__preview">
            <div class="page-setup__preview">
              <p class="placeholder" id="page-setup-preview-placeholder">
                Adjust page settings to refresh the live preview instantly.
              </p>
            <h3 class="header">Page Preview</h3>
            <div class="page-setup__canvas-container">
              <canvas class="page-setup__canvas" id="page-preview-canvas" width="400" height="500"></canvas>
              <div class="page-setup__canvas-info">
                <output class="page-setup__dimensions" id="canvas-dimensions">210 × 297 mm (A4 Portrait)</output>
                <output class="page-setup__margins-info" id="margins-info">Margins: 2.54mm all sides</output>
              </div>
            </div>
            </div>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="page-setup-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Interface Article -->
      <article id="interface" data-course-section class="article article--interface">
        <div class="article__main">
          <p class="placeholder">Interface content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="interface-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Themes Article -->
      <article id="themes" data-course-section class="article article--themes">
        <div class="article__main">
          <p class="placeholder">Themes content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="themes-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Accessibility & Comfort Article -->
      <article id="accessibility-comfort" data-course-section class="article article--accessibility-comfort">
        <div class="article__main">
          <p class="placeholder">Accessibility & Comfort content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="accessibility-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Notifications & Alerts Article -->
      <article id="notifications-alerts" data-course-section class="article article--notifications-alerts">
        <div class="article__main">
          <p class="placeholder">Notifications & Alerts content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="notifications-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Data Management & Backup Article -->
      <article id="data-management" data-course-section class="article article--data-management">
        <div class="article__main">
          <p class="placeholder">Data Management & Backup content will be added here.</p>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="data-management-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>

      <!-- Advanced Settings Article -->
      <article id="advanced-settings" data-course-section class="article article--advanced-settings">
        <!-- Danger Zone -->
        <div class="article__main">
          <section class="settings__section settings__section--danger">
            <h3 class="settings__heading settings__heading--danger">
              Danger Zone
            </h3>
            <p class="settings__description">
              Once you delete a course, there is no going back. Please be certain.
            </p>
            <button class="button button--delete" id="delete-course-btn">
              Delete Course
            </button>
          </section>
        </div>

        <footer class="article__footer">
          <div class="article__footer-content">
            <div class="card card--save-status" id="advanced-settings-card card--save-status" aria-live="polite" data-status="empty">
              <span class="card card--card__icon" aria-hidden="true"></span>
              <span class="card card--card__text">No data submitted yet</span>
            </div>
          </div>
        </footer>
      </article>
    </section>




    <!-- Create View -->
    <div class="coursebuilder__create" aria-hidden="true" id="create">
      <div class="engine">


        <div class="engine__content">
          <div class="engine__media">
            <button class="button button--engine" data-media="files">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-files.svg" alt="">
              <span class="label label--small">Files</span>
            </button>
            <button class="button button--engine" data-media="images">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-image.svg" alt="">
              <span class="label label--small">Images</span>
            </button>
            <button class="button button--engine" data-media="videos">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-video.svg" alt="">
              <span class="label label--small">Videos</span>
            </button>
            <button class="button button--engine" data-media="audio">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-audio.svg" alt="">
              <span class="label label--small">Audio</span>
            </button>
            <button class="button button--engine" data-media="text">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-text.svg" alt="">
              <span class="label label--small">Text</span>
            </button>
            <button class="button button--engine" data-media="plugin">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-plugins.svg" alt="">
              <span class="label label--small">Plugins</span>
            </button>
            <button class="button button--engine" data-media="links">
              <img class="icon icon--base" src="/src/assets/icons/coursebuilder/media/media-link.svg" alt="">
              <span class="label label--small">Links</span>
            </button>
            <button class="button button--engine" data-media="games">
              <img class="icon icon--base" src="/src/assets/icons/joystick-icon.svg" alt="">
              <span class="label label--small">Games</span>
            </button>
            <button class="button button--engine" data-media="graphs">
              <img class="icon icon--base" src="/src/assets/icons/chart-area-icon.svg" alt="">
              <span class="label label--small">Graphs</span>
            </button>
          </div>
          <!-- Search -->
          <div class="engine__search search">
            <input class="input input--search" type="search" placeholder="Search media..." id="media-search-input">
          </div>
        </div>

        <button class="engine__resizer" type="button" aria-label="Resize search column" data-engine-resizer="search"></button>

        <!-- Canvas Area -->
        <div class="engine__canvas canvas" id="canvas-container">
          <!-- Canvas will be inserted here by JavaScript -->

          <!-- Left Side: Perspective + Mode (inside canvas) -->
          <div class="engine__perspective">
            <!-- Zoom Indicator -->
            <div class="engine__perspective-zoom" title="Current zoom level - Ctrl/Cmd+wheel to zoom">100%</div>

            <button class="button button--engine" data-perspective="zoom-in" title="Focus">
              <img src="/src/assets/icons/coursebuilder/perspective/zoomin-icon.svg" alt="Focus"
                class="icon icon--base">
              <span class="label label--small">Focus</span>
            </button>
            <button class="button button--engine" data-perspective="zoom-out" title="Expand">
              <img src="/src/assets/icons/coursebuilder/perspective/zoomout-icon.svg" alt="Expand"
                class="icon icon--base">
              <span class="label label--small">Expand</span>
            </button>

            <button class="button button--engine" data-perspective="reset" title="Reset View">
              <img src="/src/assets/icons/coursebuilder/perspective/reset-icon.svg" alt="Reset View"
                class="icon icon--base">
              <span class="label label--small">Reset</span>
            </button>

            <button class="button button--engine" data-perspective="grab" title="grab">
              <img src="/src/assets/icons/coursebuilder/perspective/grab-icon.svg" alt="grab" class="icon icon--base">
              <span class="label label--small">Grab</span>
            </button>

            <!-- Grid button (opens Snap Menu) -->
            <button class="button button--engine" data-perspective="grid" title="Snapping" data-snap-anchor>
              <img src="/src/assets/icons/coursebuilder/perspective/grid-icon.svg" alt="Snapping"
                class="icon icon--base">
              <span class="label label--small">Grid</span>
            </button>
          </div>

          <!-- Right Side: Canvas Scroll Navigation -->
          <div class="engine__scroll">
            <!-- Go to top -->
            <button class="button button--engine" data-scroll="first" title="Go to first canvas">
              <svg class="icon icon--base" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 15l-6-6-6 6"/>
                <path d="M18 9l-6-6-6 6"/>
              </svg>
              <span class="label label--small">First</span>
            </button>

            <!-- Go back one -->
            <button class="button button--engine" data-scroll="prev" title="Previous canvas">
              <svg class="icon icon--base" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 15l-6-6-6 6"/>
              </svg>
              <span class="label label--small">Prev</span>
            </button>

            <!-- Current position / total -->
            <div class="engine__scroll-display">
              <input
                type="number"
                class="engine__scroll-input"
                id="engine-scroll-input"
                name="engine-scroll-input"
                value="1"
                min="1"
                title="Current canvas number"
                aria-label="Current canvas number">
              <span class="engine__scroll-divider">/</span>
              <span class="engine__scroll-total" title="Total canvases">225</span>
            </div>

            <!-- Go forward one -->
            <button class="button button--engine" data-scroll="next" title="Next canvas">
              <svg class="icon icon--base" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
              <span class="label label--small">Next</span>
            </button>

            <!-- Go to bottom -->
            <button class="button button--engine" data-scroll="last" title="Go to last canvas">
              <svg class="icon icon--base" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
                <path d="M6 15l6 6 6-6"/>
              </svg>
              <span class="label label--small">Last</span>
            </button>
          </div>

          <!-- Bottom: Modes and Tools Container -->
          <div class="engine__controls">

            <!-- Mode Selector -->
            <div class="engine__modes">
              <button class="button button--engine button--compact" data-mode="build">
                <img class="icon icon--base" src="/src/assets/icons/coursebuilder/modes/mode-build.svg" alt="">
                <span class="label label--small">Build</span>
              </button>

              <button class="button button--engine button--compact" data-mode="animate">
                <img class="icon icon--base" src="/src/assets/icons/coursebuilder/modes/mode-animate.svg" alt="">
                <span class="label label--small">Animate</span>
              </button>
            </div>

            <!-- Tools (2 rows) -->
            <div class="engine__tools">
              <!-- Tool Options Row (Top) -->
              <div class="engine__tools-options">
                <!-- Pen Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--pen"
                  style="display: none;">
                  <input type="number" min="1" max="15" value="2" class="input input--number"
                    data-setting="size" id="pen-size-input" name="pen-size" aria-label="Pen size">

                  <div class="input input--color-picker color-selector" data-color-selector="pen-stroke" data-initial-color="#282a29"></div>
                  <div class="input input--color-picker color-selector" data-color-selector="pen-fill" data-initial-color="#fef6eb"
                    data-allow-transparent="true"></div>
                </div>

                <!-- Text Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--text"
                  style="display: none;">
                  <select id="text-size-select" class="input input--select" data-setting="fontSize">
                    <option value="12" data-label="Normal">Normal Text (12 pt)</option>
                    <option value="26" data-label="Title">Title (26 pt)</option>
                    <option value="20" data-label="Header1">Header 1 (20 pt)</option>
                    <option value="16" data-label="Header2" selected>Header 2 (16 pt)</option>
                    <option value="14" data-label="Header3">Header 3 (14 pt)</option>
                  </select>

                  <div class="engine__text-style-controls" aria-label="Text Style">
                    <button type="button" class="button button--engine engine__text-style-btn" data-text-style="bold">B</button>
                    <button type="button" class="button button--engine engine__text-style-btn" data-text-style="italic">I</button>
                  </div>

                  <select id="font-family-select" class="input input--select" data-setting="fontFamily">
                    <option value="Arial" data-font-family="Arial">Arial</option>
                    <option value="Times New Roman" data-font-family="Times New Roman">Times New Roman</option>
                    <option value="Georgia" data-font-family="Georgia">Georgia</option>
                    <option value="Verdana" data-font-family="Verdana">Verdana</option>
                    <option value="Tahoma" data-font-family="Tahoma">Tahoma</option>
                  </select>

                  <div class="input input--color-picker color-selector" data-color-selector="text" data-initial-color="#282a29"></div>
                </div>

                <!-- Brush Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--brush"
                  style="display: none;">
                  <input type="number" min="10" max="50" value="20" class="input input--number"
                    data-setting="size" id="brush-size-input" name="brush-size" aria-label="Brush size">

                  <div class="input input--color-picker color-selector" data-color-selector="brush" data-initial-color="#2b8059"></div>
                </div>

                <!-- Shapes Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--shapes"
                  style="display: none;">
                  <div class="input input--shape-picker shape-selector" data-shape-selector="shapes" data-initial-shape="rectangle"></div>

                  <input type="number" min="1" max="20" value="2" class="input input--number"
                    data-setting="strokeWidth" id="shape-stroke-width-input" name="shape-stroke-width"
                    aria-label="Shape stroke width">

                  <div class="input input--color-picker color-selector" data-color-selector="shapes-stroke" data-initial-color="#282a29"></div>
                  <div class="input input--color-picker color-selector" data-color-selector="shapes-fill" data-initial-color="transparent"
                    data-allow-transparent="true"></div>
                </div>

                <!-- Eraser Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--eraser"
                  style="display: none;">
                  <input type="number" min="5" max="50" value="20" class="input input--number"
                    data-setting="size" id="eraser-size-input" name="eraser-size" aria-label="Eraser size">
                </div>

                <!-- Table Settings -->
                <div class="engine__tools-item engine__tools-item--horizontal engine__tools-item--tables"
                  style="display: none;">
                  <input type="number" min="1" max="20" value="3" class="input input--number"
                    data-setting="size" id="table-size-input" name="table-size" aria-label="Table size">

                  <select class="input input--select" data-setting="tableType" id="table-type-select"
                    name="table-type" aria-label="Table type">
                    <option value="basic">Basic</option>
                    <option value="bordered">Bordered</option>
                    <option value="striped">Striped</option>
                  </select>
                </div>
              </div>


              <div class="engine__tools-selection">
                <!-- Build Mode Tools -->
                <button class="button button--engine button--active" data-tool="selection" data-mode="build" aria-label="Select">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-select.svg" alt="Selection Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="pen" data-mode="build" aria-label="Pen">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-pen.svg" alt="Pen Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="brush" data-mode="build" aria-label="Brush">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-brush.svg" alt="Brush Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="text" data-mode="build" aria-label="Text">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-write.svg" alt="Text Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="shapes" data-mode="build" aria-label="Shapes">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-shapes.svg" alt="Shapes Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="tables" data-mode="build" aria-label="Tables">
                  <img src="/src/assets/icons/coursebuilder/media/media-table.svg" alt="Table Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="generate" data-mode="build" aria-label="Generate">
                  <img src="/src/assets/icons/bot-icon.svg" alt="Generate Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="eraser" data-mode="build" aria-label="Eraser">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-eraser.svg" alt="Eraser Tool"
                    class="icon icon--base">
                </button>

                <!-- Animate Mode Tools -->
                <button class="button button--engine" data-tool="selection" data-mode="animate" aria-label="Select" style="display: none;">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-select.svg" alt="Selection Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="scene" data-mode="animate" aria-label="Scene" style="display: none;">
                  <img src="/src/assets/icons/coursebuilder/modes/mode-animate.svg" alt="Scene Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="path" data-mode="animate" aria-label="Path" style="display: none;">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-pen.svg" alt="Path Tool"
                    class="icon icon--base">
                </button>
                <button class="button button--engine" data-tool="modify" data-mode="animate" aria-label="Modify" style="display: none;">
                  <img src="/src/assets/icons/coursebuilder/tools/tool-shapes.svg" alt="Modify Tool"
                    class="icon icon--base">
                </button>
              </div>
            </div>

          </div> <!-- End engine__controls -->

          <!-- Navigation inside canvas can be added here if needed -->

          <!-- Snap Menu (positioned inside canvas) -->
          <div class="engine__snap-menu" id="snap-menu" data-snap-menu>
            <!-- Smart Guides Toggle -->
            <div class="engine__snap-item engine__snap-item--active" data-snap-option="smart">
              <input type="checkbox" id="smart-guides-toggle" class="engine__snap-toggle-checkbox" checked>
              <span>Smart Guides</span>
            </div>

            <!-- Enhanced Smart Guides Settings -->
            <div class="engine__snap-section">
              <div class="engine__snap-toggle" data-smart-setting="showDistToAll">
                <input type="checkbox" id="showDistToAll" checked>
                <label for="showDistToAll">Distance Labels</label>
              </div>

              <div class="engine__snap-toggle" data-smart-setting="enableResizeGuides">
                <input type="checkbox" id="enableResizeGuides" checked>
                <label for="enableResizeGuides">Resize Guides</label>
              </div>

              <div class="engine__snap-toggle" data-smart-setting="enableSmartSelection">
                <input type="checkbox" id="enableSmartSelection" checked>
                <label for="enableSmartSelection">Smart Selection</label>
              </div>

              <div class="engine__snap-toggle" data-smart-setting="enableColorCoding">
                <input type="checkbox" id="enableColorCoding" checked>
                <label for="enableColorCoding">Color Coding</label>
              </div>
            </div>

            <!-- Distribute actions -->
            <div class="engine__snap-divider"></div>
            <div class="engine__snap-row">
              <div class="engine__snap-item" data-distribute="horizontal">
                <img class="engine__snap-icon icon icon--base"
                  src="/src/assets/icons/coursebuilder/perspective/snap-smart.svg" alt="Distribute H"><span>Distribute
                  Horizontally</span>
              </div>
              <div class="engine__snap-item" data-distribute="vertical">
                <img class="engine__snap-icon icon icon--base"
                  src="/src/assets/icons/coursebuilder/perspective/snap-smart.svg" alt="Distribute V"><span>Distribute
                  Vertically</span>
              </div>
            </div>

            <!-- Smart Guide Reference Modes -->
            <div class="engine__snap-divider"></div>
            <div class="engine__snap-guide-modes">
              <label>Smart Guide Reference</label>
              <div class="engine__snap-row">
                <div class="engine__snap-item engine__snap-item--small engine__snap-item--active"
                  data-reference-mode="canvas"
                  title="Smart guides snap objects to canvas edges, center, or quadrants. Provides absolute positioning relative to the viewport; guides appear as lines from canvas boundaries during drag, with minimal tolerance for alignment.">
                  <img class="engine__snap-icon icon icon--base"
                    src="/src/assets/icons/coursebuilder/perspective/canvas-icon.svg"
                    alt="Canvas Reference"><span>Canvas Reference</span>
                </div>
                <div class="engine__snap-item engine__snap-item--small" data-reference-mode="object"
                  title="Smart guides align to other objects' edges, centers, or paths. Dynamic snapping based on nearby elements; shows temporary guide lines connecting matching points, with adjustable sensitivity for crowded scenes.">
                  <img class="engine__snap-icon icon icon--base"
                    src="/src/assets/icons/coursebuilder/perspective/selection-icon.svg"
                    alt="Object Reference"><span>Object Reference</span>
                </div>
                <div class="engine__snap-item engine__snap-item--small" data-reference-mode="grid"
                  title="Smart guides follow a predefined grid system (e.g., pixel or custom intervals). Restricts movement to grid increments; displays persistent grid lines or dots, enforcing uniform spacing unlike freeform object snapping.">
                  <img class="engine__snap-icon icon icon--base"
                    src="/src/assets/icons/coursebuilder/perspective/grid-icon.svg" alt="Grid Reference"><span>Grid
                    Reference</span>
                </div>
              </div>
            </div>

            <!-- Grid Options (only visible when Grid Reference is selected) -->
            <div class="engine__snap-grid-options" id="grid-options" style="display: none;">
              <div class="engine__snap-toggle">
                <input type="checkbox" id="show-grid" checked>
                <label for="show-grid">Show grid</label>
              </div>

              <div class="engine__snap-grid-spacing">
                <label for="grid-spacing">Grid spacing:</label>
                <input type="number" id="grid-spacing" min="1" max="100" value="20" class="input input--number">
                <span class="grid-spacing-unit">px</span>
              </div>
            </div>
          </div>
        </div>

        <button class="engine__resizer" type="button" aria-label="Resize inspector panel" data-engine-resizer="panel"></button>

        <!-- Layers Panel - Now floating overlay on the right -->
        <div class="engine__panel">
          <div class="engine__panel-header">
            <div class="engine__panel-toggle">
              <button class="engine__panel-toggle-btn engine__panel-toggle-btn--active" data-panel-view="layers" aria-label="Show Layers panel" aria-pressed="true">
                Layers
              </button>
              <span class="engine__panel-toggle-divider">|</span>
              <button class="engine__panel-toggle-btn" data-panel-view="navigation" aria-label="Show Navigation panel" aria-pressed="false">
                Navigation
              </button>
            </div>
          </div>
          <div class="engine__panel-content">
            <!-- Layers Panel View -->
            <div class="engine__panel-view engine__panel-view--active" data-view="layers">
              <div class="engine__layers">
                <div class="layers-panel">
                  <div class="layers-panel__content">
                    <ol class="layers-list" id="layers-list-root"></ol>
                  </div>
                </div>
              </div>
            </div>
            <!-- Navigation Panel View -->
            <div class="engine__panel-view" data-view="navigation">
              <div class="engine__navigation">
                <div class="navigation-content">
                  <h4>Course Structure</h4>
                  <p>Loading course outline…</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Preview View -->
    <div class="coursebuilder__preview" aria-hidden="true" id="preview">
      <article class="article">
        <p class="placeholder">Course preview will be displayed here...</p>
      </article>
    </div>

    <!-- Launch View -->
    <div class="coursebuilder__launch" aria-hidden="true" id="launch">
      <article class="article">
        <p class="placeholder">Course launch options will be available here...</p>
      </article>
    </div>
  </main>

  <!-- Core application scripts -->
  <script type="module" src="/src/scripts/app.ts"></script>
  <!-- Engine layout resizer -->
  <script type="module" src="/src/scripts/coursebuilder/tools/EngineResizer.ts"></script>
  <!-- Language loader for course languages -->
  <script type="module" src="/src/scripts/backend/courses/settings/languageLoader.ts"></script>
  <!-- Navigation system (handles all coursebuilder navigation) -->
  <script type="module" src="/src/scripts/navigation/CourseBuilderNavigation.ts"></script>
  <!-- Canvas scroll navigation -->
  <script type="module" src="/src/scripts/navigation/CanvasScrollNav.ts"></script>
  <!-- Backend services -->
  <script type="module" src="/src/scripts/backend/courses/index.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/classification/classificationFormHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/templates/createTemplate.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/templates/templateConfigHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/schedule/scheduleCourse.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/settings/pageSetupHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/generation/generationSettingsHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/pedagogy/pedagogyHandler.ts"></script>
  <!-- Media Manager UI (search + providers) -->
  <script type="module" src="/src/scripts/media/ui/MediaInterface.ts"></script>


</body>

</html>
