<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boundary Debug Tool</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .debug-panel { background: #f5f5f5; padding: 15px; margin: 10px 0; border-left: 4px solid #007acc; }
        .coords { background: #ffffcc; padding: 5px; margin: 5px 0; }
        .error { background: #ffcccc; padding: 5px; margin: 5px 0; }
        .success { background: #ccffcc; padding: 5px; margin: 5px 0; }
    </style>
</head>
<body>
    <h2>üîç Boundary Debug Tool</h2>
    <div class="debug-panel">
        <p>This tool will help us debug why drawing is still constrained to 1200√ó1800.</p>
        <button onclick="runBoundaryTest()">Test Boundary Functions</button>
        <div id="results"></div>
    </div>

    <script>
        async function runBoundaryTest() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>Running boundary tests...</p>';
            
            try {
                // Test 1: Check if BoundaryUtils exists and has our new method
                results.innerHTML += '<div class="debug-panel"><h3>Test 1: Function Availability</h3>';
                
                // We can't actually import the modules here, but we can create a test
                // that simulates what should happen
                
                const mockCanvasBounds = {
                    x: 0, y: 0, width: 1200, height: 1800
                };
                
                const expectedPasteboardBounds = {
                    x: 0, y: 0, width: 1800, height: 2700
                };
                
                results.innerHTML += `
                    <div class="coords">Canvas Bounds (expected): ${JSON.stringify(mockCanvasBounds)}</div>
                    <div class="coords">Pasteboard Bounds (expected): ${JSON.stringify(expectedPasteboardBounds)}</div>
                `;
                
                // Test 2: Coordinate transformation
                results.innerHTML += '<h3>Test 2: Coordinate Scenarios</h3>';
                
                const testPoints = [
                    { x: 100, y: 100, desc: "Top-left canvas area" },
                    { x: 600, y: 900, desc: "Center of canvas" },
                    { x: 1100, y: 1700, desc: "Bottom-right of canvas" },
                    { x: 50, y: 50, desc: "Top-left pasteboard (gray area)" },
                    { x: 1750, y: 2650, desc: "Bottom-right pasteboard (gray area)" },
                    { x: 1400, y: 900, desc: "Right pasteboard area" }
                ];
                
                testPoints.forEach(point => {
                    const inCanvas = point.x >= 0 && point.x <= 1200 && point.y >= 0 && point.y <= 1800;
                    const inPasteboard = point.x >= 0 && point.x <= 1800 && point.y >= 0 && point.y <= 2700;
                    
                    const status = inCanvas ? 'success' : (inPasteboard ? 'coords' : 'error');
                    results.innerHTML += `
                        <div class="${status}">
                            Point (${point.x}, ${point.y}) - ${point.desc}
                            Canvas: ${inCanvas ? '‚úÖ' : '‚ùå'} | Pasteboard: ${inPasteboard ? '‚úÖ' : '‚ùå'}
                        </div>
                    `;
                });
                
                results.innerHTML += '</div>';
                
                // Test 3: Potential issues
                results.innerHTML += `
                    <div class="debug-panel">
                        <h3>ü§î Potential Issues to Check:</h3>
                        <ol>
                            <li><strong>Dynamic Import Failure:</strong> getPasteboardBounds() might be falling back to canvas bounds</li>
                            <li><strong>PIXI App Size:</strong> The actual PIXI application might still be 1200√ó1800</li>
                            <li><strong>Container Transform:</strong> Drawing coordinates might be transformed back to canvas space</li>
                            <li><strong>Layer Clipping:</strong> Graphics might be clipped to canvas dimensions</li>
                            <li><strong>Event Boundaries:</strong> Pointer events might not reach pasteboard area</li>
                        </ol>
                        
                        <h3>üîß Next Steps:</h3>
                        <p>We need to add console.log statements to the actual boundary checking code to see what's really happening when you try to draw in the gray area.</p>
                    </div>
                `;
                
            } catch (error) {
                results.innerHTML += `<div class="error">Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>