<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Keys Test - Neptino</title>
    <style>
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            padding: 24px;
            background-color: #f9fafb;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .test-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }
        .status-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        .status-error {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .test-button {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 8px;
        }
        .test-button:hover {
            background-color: #2563eb;
        }
        .test-button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        .test-result {
            margin-top: 12px;
            padding: 12px;
            border-radius: 4px;
            font-size: 14px;
        }
        .result-success {
            background-color: #ecfdf5;
            border: 1px solid #d1fae5;
            color: #065f46;
        }
        .result-error {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>API Keys Test Page</h1>
        <p>Use this page to test if your API keys are working correctly. Click the test buttons below:</p>
        
        <!-- Pixabay Test -->
        <div class="test-card">
            <h3>Pixabay API <span class="test-status status-pending" id="pixabay-status">Not Tested</span></h3>
            <p><strong>Purpose:</strong> Free stock images, videos, and music</p>
            <p><strong>Required:</strong> VITE_PIXABAY_KEY</p>
            <button class="test-button" onclick="testPixabay()" id="pixabay-btn">Test Pixabay API</button>
            <div id="pixabay-result" class="test-result" style="display: none;"></div>
        </div>

        <!-- Unsplash Test -->
        <div class="test-card">
            <h3>Unsplash API <span class="test-status status-pending" id="unsplash-status">Not Tested</span></h3>
            <p><strong>Purpose:</strong> High-quality free stock photos</p>
            <p><strong>Required:</strong> VITE_UNSPLASH_KEY</p>
            <button class="test-button" onclick="testUnsplash()" id="unsplash-btn">Test Unsplash API</button>
            <div id="unsplash-result" class="test-result" style="display: none;"></div>
        </div>

        <!-- Pexels Test -->
        <div class="test-card">
            <h3>Pexels API <span class="test-status status-pending" id="pexels-status">Not Tested</span></h3>
            <p><strong>Purpose:</strong> Free stock photos and videos</p>
            <p><strong>Required:</strong> VITE_PEXELS_KEY</p>
            <button class="test-button" onclick="testPexels()" id="pexels-btn">Test Pexels API</button>
            <div id="pexels-result" class="test-result" style="display: none;"></div>
        </div>

        <!-- Freesound Test -->
        <div class="test-card">
            <h3>Freesound API <span class="test-status status-pending" id="freesound-status">Not Tested</span></h3>
            <p><strong>Purpose:</strong> Free audio clips and sound effects</p>
            <p><strong>Required:</strong> VITE_FREESOUND_KEY</p>
            <button class="test-button" onclick="testFreesound()" id="freesound-btn">Test Freesound API</button>
            <div id="freesound-result" class="test-result" style="display: none;"></div>
        </div>

        <!-- Google Drive Test -->
        <div class="test-card">
            <h3>Google Drive API <span class="test-status status-pending" id="gdrive-status">Not Tested</span></h3>
            <p><strong>Purpose:</strong> Import files from Google Drive</p>
            <p><strong>Required:</strong> VITE_GOOGLE_DRIVE_KEY, VITE_GOOGLE_DRIVE_CLIENT_ID</p>
            <button class="test-button" onclick="testGoogleDrive()" id="gdrive-btn">Test Google Drive API</button>
            <div id="gdrive-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-card">
            <h3>Test All APIs</h3>
            <button class="test-button" onclick="testAllAPIs()" id="test-all-btn">Run All Tests</button>
        </div>
    </div>

    <script type="module">
        // Import environment variables (Vite style)
        const PIXABAY_KEY = import.meta.env.VITE_PIXABAY_KEY;
        const UNSPLASH_KEY = import.meta.env.VITE_UNSPLASH_KEY;
        const PEXELS_KEY = import.meta.env.VITE_PEXELS_KEY;
        const FREESOUND_KEY = import.meta.env.VITE_FREESOUND_KEY;
        const GOOGLE_DRIVE_KEY = import.meta.env.VITE_GOOGLE_DRIVE_KEY;
        const GOOGLE_DRIVE_CLIENT_ID = import.meta.env.VITE_GOOGLE_DRIVE_CLIENT_ID;

        function updateStatus(service, status, message = '') {
            const statusElement = document.getElementById(`${service}-status`);
            const resultElement = document.getElementById(`${service}-result`);
            const buttonElement = document.getElementById(`${service}-btn`);
            
            statusElement.className = `test-status status-${status}`;
            statusElement.textContent = status === 'success' ? 'Working' : status === 'error' ? 'Failed' : 'Testing...';
            
            if (message) {
                resultElement.style.display = 'block';
                resultElement.className = `test-result result-${status}`;
                resultElement.textContent = message;
            }
            
            buttonElement.disabled = false;
        }

        window.testPixabay = async function() {
            document.getElementById('pixabay-btn').disabled = true;
            updateStatus('pixabay', 'pending');
            
            if (!PIXABAY_KEY || PIXABAY_KEY === 'your_pixabay_api_key_here') {
                updateStatus('pixabay', 'error', 'API key missing or not configured. Check your .env file.');
                return;
            }

            try {
                const response = await fetch(`https://pixabay.com/api/?key=${PIXABAY_KEY}&q=education&per_page=3`);
                if (response.ok) {
                    const data = await response.json();
                    updateStatus('pixabay', 'success', `Success! Found ${data.totalHits} images. API is working correctly.`);
                } else {
                    updateStatus('pixabay', 'error', `HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                updateStatus('pixabay', 'error', `Network error: ${error.message}`);
            }
        };

        window.testUnsplash = async function() {
            document.getElementById('unsplash-btn').disabled = true;
            updateStatus('unsplash', 'pending');
            
            if (!UNSPLASH_KEY || UNSPLASH_KEY === 'your_unsplash_access_key_here') {
                updateStatus('unsplash', 'error', 'API key missing or not configured. Check your .env file.');
                return;
            }

            try {
                const response = await fetch(`https://api.unsplash.com/search/photos?query=education&per_page=1`, {
                    headers: {
                        'Authorization': `Client-ID ${UNSPLASH_KEY}`
                    }
                });
                if (response.ok) {
                    const data = await response.json();
                    updateStatus('unsplash', 'success', `Success! Found ${data.total} images. API is working correctly.`);
                } else {
                    updateStatus('unsplash', 'error', `HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                updateStatus('unsplash', 'error', `Network error: ${error.message}`);
            }
        };

        window.testPexels = async function() {
            document.getElementById('pexels-btn').disabled = true;
            updateStatus('pexels', 'pending');
            
            if (!PEXELS_KEY || PEXELS_KEY === 'your_pexels_api_key_here') {
                updateStatus('pexels', 'error', 'API key missing or not configured. Check your .env file.');
                return;
            }

            try {
                const response = await fetch(`https://api.pexels.com/v1/search?query=education&per_page=1`, {
                    headers: {
                        'Authorization': PEXELS_KEY
                    }
                });
                if (response.ok) {
                    const data = await response.json();
                    updateStatus('pexels', 'success', `Success! Found ${data.total_results} images. API is working correctly.`);
                } else {
                    updateStatus('pexels', 'error', `HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                updateStatus('pexels', 'error', `Network error: ${error.message}`);
            }
        };

        window.testFreesound = async function() {
            document.getElementById('freesound-btn').disabled = true;
            updateStatus('freesound', 'pending');
            
            if (!FREESOUND_KEY || FREESOUND_KEY === 'your_freesound_api_key_here') {
                updateStatus('freesound', 'error', 'API key missing or not configured. Check your .env file.');
                return;
            }

            try {
                const response = await fetch(`https://freesound.org/apiv2/search/text/?query=bell&token=${FREESOUND_KEY}&fields=id,name,duration&page_size=1`);
                if (response.ok) {
                    const data = await response.json();
                    updateStatus('freesound', 'success', `Success! Found ${data.count} audio files. API is working correctly.`);
                } else {
                    const errorText = await response.text();
                    updateStatus('freesound', 'error', `HTTP ${response.status}: ${response.statusText} - ${errorText.substring(0, 200)}...`);
                }
            } catch (error) {
                updateStatus('freesound', 'error', `Network error: ${error.message}`);
            }
        };

        window.testGoogleDrive = function() {
            document.getElementById('gdrive-btn').disabled = true;
            updateStatus('gdrive', 'pending');
            
            if (!GOOGLE_DRIVE_KEY || GOOGLE_DRIVE_KEY === 'your_google_drive_api_key_here') {
                updateStatus('gdrive', 'error', 'API key missing or not configured. Check your .env file.');
                return;
            }

            if (!GOOGLE_DRIVE_CLIENT_ID || GOOGLE_DRIVE_CLIENT_ID === 'your_google_drive_client_id_here') {
                updateStatus('gdrive', 'error', 'Client ID missing or not configured. Check your .env file.');
                return;
            }

            updateStatus('gdrive', 'success', 'Configuration present. Google Drive requires OAuth authentication which will be tested when you use the actual feature.');
        };

        window.testAllAPIs = function() {
            console.log('Testing all APIs...');
            testPixabay();
            setTimeout(() => testUnsplash(), 500);
            setTimeout(() => testPexels(), 1000);
            setTimeout(() => testFreesound(), 1500);
            setTimeout(() => testGoogleDrive(), 2000);
        };
    </script>
</body>
</html>
