<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="pixi-devtools" content="enabled" />
  <title>Course Builder - Neptino</title>
  <link rel="stylesheet" href="/src/scss/main.scss" />
</head>

<body>
  <header>
    <nav>
      <button id="previous-button" title="Previous Step">
        <span>‹</span>
        <span>Previous</span>
      </button>
      <a href="/src/pages/teacher/home.html" title="Back to Home">
        <img src="/src/assets/logo/octopus-logo.png" alt="Neptino Logo" />
      </a>
      <button id="next-button" title="Next Step">
        <span>Next</span>
        <span>›</span>
      </button>
    </nav>
  </header>
  <main>
    <!-- Setup Section (with aside navigation) -->
    <section id="setup">
      <aside>
        <nav>
          <h3>Required</h3>
          <ul>
            <li>
              <a href="#essentials" data-section="essentials">Essentials</a>
            </li>
            <li>
              <a href="#classification" data-section="classification">Classification</a>
            </li>
            <li>
              <a href="#templates" data-section="templates">Templates</a>
            </li>
            <li>
              <a href="#schedule" data-section="schedule">Schedule</a>
            </li>
            <li>
              <a href="#curriculum" data-section="curriculum">Curriculum</a>
            </li>
          </ul>
          <h3>Optional</h3>
          <ul>
            <li>
              <a href="#marketplace" data-section="marketplace">Marketplace</a>
            </li>
            <li>
              <a href="#resources" data-section="resources">Resources</a>
            </li>
          </ul>
          <ul>
            <li>
              <a href="#settings" data-section="settings">Settings</a>
            </li>
          </ul>
        </nav>
      </aside>
      <!-- Essentials Article -->
      <article id="essentials">
        <section>
          <form id="course-essentials-form">
            <label for="course-name">Course Name</label>
            <input type="text" id="course-name" name="course_name" placeholder="Enter course name" required />
            </div>
            <div>
              <label for="course-description">Course Description</label>
              <textarea id="course-description" name="course_description" rows="4"
                placeholder="Describe what students will learn" required></textarea>
              <label for="teacher-id">Teacher</label>
              <input type="text" id="teacher-id" name="teacher_id" placeholder="Loading..." readonly />
            </div>
            <div>
              <label for="institution">Institution</label>
              <input type="text" id="institution" name="institution" placeholder="Loading..." readonly />
            </div>
            <div>
              <label for="course-language">Course Language</label>
              <select id="course-language" name="course_language" required>
                <option value="">Select language...</option>
              </select>
              <label for="course-image">Course Image</label>
              <div>
                <input type="file" id="course-image" name="course_image" accept="image/*" required />
                <div>
                  <label for="course-image">
                    <span>Change course image</span>
                  </label>
                  <div id="image-preview" style="display: none">
                    <img id="preview-img" src="" alt="Course preview" />
                    <button type="button" id="remove-image">
                      ×
                    </button>
                  </div>
                </div>
              </div>
              <div>
                <button type="submit" id="create-course-btn" disabled>
                  Create Course
                </button>
                <div id="course-code-display" style="display: none">
                  <div>
                    <span>Course Code:</span>
                    <button type="button" id="course-code-copy-btn" title="Copy course code">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </section>
      </article>
      <!-- Classification Article -->
      <article id="classification">
        <section>
          <form id="course-classification-form">
            <!-- Row 1: Class Year + Curricular Framework -->
            <div>
              <div>
                <label for="class-year-dropdown">Class Year</label>
                <div>
                  <button type="button" id="class-year-dropdown" aria-haspopup="listbox" aria-expanded="false">
                    <span>Select class year...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="class_year" id="class-year-value" />
                </div>
                <label for="curricular-framework-dropdown">Curricular Framework</label>
                <div>
                  <button type="button" id="curricular-framework-dropdown" aria-haspopup="listbox"
                    aria-expanded="false">
                    <span>Select framework...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="curricular_framework" id="curricular-framework-value" />
                </div>
              </div>
              <!-- Row 2: Domain + Subject + Topic + Subtopic -->
              <div>
                <label for="domain-dropdown">Domain</label>
                <div>
                  <button type="button" id="domain-dropdown" aria-haspopup="listbox" aria-expanded="false">
                    <span>Select domain...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="domain" id="domain-value" />
                </div>
                <div>→</div>
                <label for="subject-dropdown">Subject</label>
                <div>
                  <button type="button" id="subject-dropdown" aria-haspopup="listbox" aria-expanded="false" disabled>
                    <span>Select domain first...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="subject" id="subject-value" />
                </div>
                <div>→</div>
                <label for="topic-dropdown">Topic</label>
                <div>
                  <button type="button" id="topic-dropdown" aria-haspopup="listbox" aria-expanded="false" disabled>
                    <span>Select subject first...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="topic" id="topic-value" />
                </div>
                <div>→</div>
                <label for="subtopic-dropdown">Subtopic
                  <span>(Optional)</span></label>
                <div>
                  <button type="button" id="subtopic-dropdown" aria-haspopup="listbox" aria-expanded="false" disabled>
                    <span>Select topic first...</span>
                    <span>▼</span>
                  </button>

                  <input type="hidden" name="subtopic" id="subtopic-value" />
                </div>
              </div>
              <!-- Row 3: Course Sequence -->
              <div>
                <label for="previous-course-dropdown">Previous Course
                  <span>(Optional)</span></label>
                <div>
                  <button type="button" id="previous-course-dropdown" aria-haspopup="listbox" aria-expanded="false">
                    <span>Select previous course...</span>
                    <span>▼</span>
                  </button>
                  <div role="listbox" id="previous-course-menu">
                    <div>
                      Your Courses
                    </div>
                    <!-- Options will be populated by JavaScript -->
                  </div>
                  <input type="hidden" name="previous_course" id="previous-course-value" />
                </div>
                <label for="current-course-dropdown">Current Course
                  <span>(Optional)</span></label>
                <div>
                  <button type="button" id="current-course-dropdown" aria-haspopup="listbox" aria-expanded="false">
                    <span>Select current course...</span>
                    <span>▼</span>
                  </button>
                  <div role="listbox" id="current-course-menu">
                    <div>
                      Your Courses
                    </div>
                    <!-- Options will be populated by JavaScript -->
                  </div>
                  <input type="hidden" name="current_course" id="current-course-value" />
                </div>
                <label for="next-course-dropdown">Next Course
                  <span>(Optional)</span></label>
                <div>
                  <button type="button" id="next-course-dropdown" aria-haspopup="listbox" aria-expanded="false">
                    <span>Select next course...</span>
                    <span>▼</span>
                  </button>
                  <div role="listbox" id="next-course-menu">
                    <div>
                      Your Courses
                    </div>
                    <!-- Options will be populated by JavaScript -->
                  </div>
                  <input type="hidden" name="next_course" id="next-course-value" />
                </div>
              </div>
              <!-- Last saved indicator -->
              <div id="classification-last-saved">
                <span id="classification-save-status">Changes will be saved
                  automatically</span>
              </div>
          </form>
        </section>
      </article>
      <!-- Templates Article -->
      <article id="templates">
        <section>
          <!-- Template Action Buttons -->
          <div>
            <button id="create-template-btn">
              <span>+</span>
              Create New Template
            </button>
            <button id="load-template-btn">
              <span>↗</span>
              Load Template
            </button>
          </div>
          <!-- Template Builder Layout -->
          <div>
            <div>
              <h3>
                Template Configuration
              </h3>
              <p>
                Select or create a template to configure its settings.
              </p>
            </div>
            <div>
              <div>
                <h4>
                  No Template Selected
                </h4>
                <p>
                  Create a new template or select an existing one to see the
                  preview here.
                </p>
              </div>
            </div>
          </div>
        </section>
      </article>
      <!-- Create Template Modal -->
      <div>
        <div>
          <h2>Create New Template</h2>
          <button type="button" onclick="TemplateManager.hideCreateTemplateModal()">
            &times;
          </button>
          <form id="create-template-form">
            <div>
              <label for="template-name">Template Name*</label>
              <input type="text" id="template-name" name="template-name" required placeholder="Enter template name" />
            </div>
            <div>
              <label for="template-type">Template Type*</label>
              <select id="template-type" name="template-type" required>
                <option value="">Select template type</option>
                <option value="lesson">Lesson</option>
              </select>
              <label for="template-description">Description (Optional)</label>
              <textarea id="template-description" name="template-description" rows="3"
                placeholder="Describe your template..."></textarea>
              <button type="button" onclick="TemplateManager.hideCreateTemplateModal()">
                Cancel
              </button>
              <button type="submit">
                Create Template
              </button>
          </form>
        </div>
      </div>
      </div>
      <!-- Load Template Modal -->
      <div>
        <div>
          <h2>Load Existing Template</h2>
          <button type="button" onclick="TemplateManager.hideLoadTemplateModal()">
            &times;
          </button>
          <div>
            <div>
              <input type="text" id="template-search" placeholder="Search templates..." />
              <div>
                <select id="template-type-filter">
                  <option value="">All Types</option>
                  <option value="lesson">Lesson</option>
                </select>
                <select id="template-sort">
                  <option value="created_at">Newest First</option>
                  <option value="name">Name (A-Z)</option>
                  <option value="modified_at">Recently Modified</option>
                </select>
              </div>
              <div id="template-loading" style="display: none">
                <p>Loading your templates...</p>
                <!-- Templates will be loaded here -->
              </div>
              <div id="no-templates-message" style="display: none">
                <div>!</div>
                <h3>No Templates Found</h3>
                <p>
                  You haven't created any templates yet. Create your first
                  template to get started!
                </p>
                <button onclick="TemplateManager.hideLoadTemplateModal(); TemplateManager.showCreateTemplateModal();">
                  Create First Template
                </button>
              </div>
            </div>
          </div>
          <button type="button" onclick="TemplateManager.hideLoadTemplateModal()">
            Cancel
          </button>
          <button type="button" id="load-selected-template" disabled onclick="TemplateManager.loadSelectedTemplate()">
            Load Template
          </button>
        </div>
      </div>
      <!-- Schedule Article -->
      <article id="schedule">
        <section>
          <!-- Schedule Layout -->
          <!-- Schedule Configuration -->
          <div id="schedule-config">
            <h3>
              Schedule Configuration
            </h3>
            <form id="course-schedule-form">
              <!-- Date Range Row -->
              <div>
                <div>
                  <label for="start-date">Start Date</label>
                  <input type="date" id="start-date" required />
                </div>
                <div>
                  <label for="end-date">End Date</label>
                  <input type="date" id="end-date" required />
                </div>
                <!-- Days of Week Selection -->
                <label>Days of the Week</label>
                <div>
                  <button type="button" data-day="monday">
                    Mon
                  </button>
                  <button type="button" data-day="tuesday">
                    Tue
                  </button>
                  <button type="button" data-day="wednesday">
                    Wed
                  </button>
                  <button type="button" data-day="thursday">
                    Thu
                  </button>
                  <button type="button" data-day="friday">
                    Fri
                  </button>
                  <button type="button" data-day="saturday">
                    Sat
                  </button>
                  <button type="button" data-day="sunday">
                    Sun
                  </button>
                </div>
                <!-- Time Range Row -->
                <div>
                  <label for="start-time">Start Time</label>
                  <input type="time" id="start-time" required />
                </div>
                <div>
                  <label for="end-time">End Time</label>
                  <input type="time" id="end-time" required />
                </div>
                <!-- Schedule Action Buttons -->
                <button type="button" id="schedule-course-btn" disabled>
                  Schedule Course
                </button>
                <button type="button" id="delete-schedule-btn">
                  Delete Schedule
                </button>
            </form>
          </div>
          <!-- Schedule Preview -->
          <h3>Schedule Preview</h3>
          <div>
            <div>
              <span>Lesson #</span>
              <span>Day</span>
              <span>Start Time</span>
              <span>End Time</span>
              <span>Actions</span>
              <!-- Schedule rows will be generated here -->
            </div>
            <div>
              <div>Total lessons: 0</div>
            </div>
          </div>
          </div>
        </section>
      </article>
      <!-- Curriculum Article -->
      <article id="curriculum">
        <section>
          <!-- Curriculum Layout -->
          <!-- Curriculum Configuration -->
          <div id="curriculum-config">
            <div>

            </div>
            <!-- Curriculum Preview -->
            <div>
              <!-- Preview Mode Buttons -->
              <div>
                <span>Display:</span>
                <button type="button" data-mode="titles">
                  Lesson Titles
                </button>
                <button type="button" data-mode="topics">
                  Lesson Topics
                </button>
                <button type="button" data-mode="objectives">
                  Lesson Objectives
                </button>
              </div>
              <!-- Curriculum content will be rendered here -->
            </div>
          </div>
        </section>
      </article>
      <!-- Settings Article -->
      <article id="settings">
        <section>
          <!-- Margins Section -->
          <h4>Margins</h4>
          <!-- Display Unit Selection -->
          <div>
            <span>Display in</span>
            <div>
              <input type="radio" id="unit-inches" name="margin-unit" value="inches" />
              <label for="unit-inches">Inches</label>
              <input type="radio" id="unit-centimeters" name="margin-unit" value="centimeters" checked />
              <label for="unit-centimeters">Centimeters</label>
            </div>
            <!-- Margin Inputs Grid -->
            <div>
              <label for="margin-top">Top</label>
              <div>
                <input type="number" id="margin-top" name="margin_top" value="2.54" step="0.01" min="0" />
                <span>cm</span>
              </div>
              <label for="margin-bottom">Bottom</label>
              <div>
                <input type="number" id="margin-bottom" name="margin_bottom" value="2.54" step="0.01" min="0" />
                <span>cm</span>
              </div>
              <label for="margin-left">Left</label>
              <div>
                <input type="number" id="margin-left" name="margin_left" value="2.54" step="0.01" min="0" />
                <span>cm</span>
              </div>
              <label for="margin-right">Right</label>
              <div>
                <input type="number" id="margin-right" name="margin_right" value="2.54" step="0.01" min="0" />
                <span>cm</span>
              </div>
            </div>
            <!-- Save Status -->
            <div id="margins-save-status">
              <span>Margins will be saved automatically</span>
            </div>
          </div>
          <!-- Course Visibility Settings -->
          <!-- Course Visibility Settings -->
          <form id="course-settings-form">
            <div>
              <div>
                <input type="checkbox" id="course-visible" name="course_visible" />
                <label for="course-visible">Course visible to students</label>
                <input type="checkbox" id="allow-enrollment" name="allow_enrollment" />
                <label for="allow-enrollment">Allow new enrollments</label>
                <input type="checkbox" id="require-approval" name="require_approval" />
                <label for="require-approval">Require enrollment approval</label>
              </div>
              <div id="settings-last-saved">
                <span id="settings-save-status">Changes will be saved
                  automatically</span>
              </div>
          </form>
          </div>
          <h3>Danger Zone</h3>
          <p>
            Once you delete a course, there is no going back. Please be
            certain.
          </p>
          <button>Delete Course</button>
        </section>
      </article>
      <!-- Marketplace Article -->
      <article id="marketplace">
        <section>
          <p>
            Marketplace integration features will be available here...
          </p>
        </section>
      </article>
      <!-- Resources Article -->
      <article id="resources">
        <section></section>
      </article>
    </section>
    <section id="create">
      <!-- Course Builder Layout -->
      <!-- Options Bar (Top Left - above media areas) -->
      <div>
        <div>
          <img src="/src/assets/icons/coursebuilder/modes/mode-build.svg" data-mode="build">
          <span>Build</span>
          <img src="/src/assets/icons/coursebuilder/modes/mode-animate.svg" data-mode="animate">
          <span>Animate</span>
          <img src="/src/assets/icons/coursebuilder/modes/mode-workflow.svg" data-mode="workflow">
          <span>Workflow</span>
          <img src="/src/assets/icons/coursebuilder/modes/mode-optimize.svg" data-mode="optimize">
          <span>Optimize</span>
        </div>
        <div>
          <img src="/src/assets/icons/coursebuilder/media/media-files.svg" data-media="files">
          <span>My Files</span>
          <img src="/src/assets/icons/coursebuilder/media/media-image.svg" data-media="images">
          <span>Images</span>
          <img src="/src/assets/icons/coursebuilder/media/media-video.svg" data-media="videos">
          <span>Videos</span>
          <img src="/src/assets/icons/coursebuilder/media/media-audio.svg" data-media="audio">
          <span>Audio</span>
          <img src="/src/assets/icons/coursebuilder/media/media-text.svg" data-media="text">
          <span>Text</span>
          <img src="/src/assets/icons/coursebuilder/media/media-table.svg" data-media="tables">
          <span>Tables</span>
          <img src="/src/assets/icons/coursebuilder/media/media-plugins.svg" data-media="plugin">
          <span>Plugins</span>
        </div>
        <input type="search" placeholder="Search media..." />
      </div>
      <div id="canvas-container">
        <div>
          <svg width="48" height="48" viewBox="0 0 24 24" fill="#ccc">
            <path
              d="M12,2A2,2 0 0,1 14,4A2,2 0 0,1 12,6A2,2 0 0,1 10,4A2,2 0 0,1 12,2M21,9V7L15,1H5C3.89,1 3,1.89 3,3V21A2,2 0 0,0 5,23H19A2,2 0 0,0 21,21V9M19,9H14V4H19V9Z" />
          </svg>
          <div>🔒 Layout-Protected Canvas</div>
          <div>Draw within pedagogical areas only<br /><small>Layout structure
              cannot be erased</small>
          </div>
        </div>
        <div>
          <img src="/src/assets/icons/coursebuilder/navigation/navigation-toc.svg" title="Page Settings">
          <span>Contents</span>
          <img src="/src/assets/icons/coursebuilder/navigation/navigation-thumbnail.svg" title="Thumbnail View">
          <span>Thumbnails</span>
          <img src="/src/assets/icons/coursebuilder/navigation/navigation-bookmark.svg" title="Bookmark">
          <span>Bookmark</span>
        </div>
        <!-- Preview content -->
      </div>
      <div>
        <!-- Tool Selection -->
        <div>
          <div>
            <img src="/src/assets/icons/coursebuilder/tools/tool-select.svg" data-tool="selection">
            <span>Select</span>
            <img src="/src/assets/icons/coursebuilder/tools/tool-pen.svg" data-tool="pen">
            <span>Pen</span>
            <img src="/src/assets/icons/coursebuilder/tools/tool-brush.svg" data-tool="highlighter">
            <span>Highlighter</span>
            <img src="/src/assets/icons/coursebuilder/tools/tool-write.svg" data-tool="text">
            <span>Text</span>
            <img src="/src/assets/icons/coursebuilder/tools/tool-shapes.svg" data-tool="shapes">
            <span>Shapes</span>
            <img src="/src/assets/icons/coursebuilder/tools/tool-eraser.svg" data-tool="eraser">
            <span>Eraser</span>
          </div>
          <!-- Tool options will be added here -->
          <!-- Selection Tool Settings (minimal since selection doesn't need many settings) -->
          <div data-tool="selection">
            <span>Selection Tool</span>
            <!-- Pen Tool Settings -->
            <input type="range" min="1" max="10" value="2" data-setting="size" title="Pen Size">
          </div>
          <!-- Highlighter Tool Settings -->
          <div data-tool="highlighter">
            <input type="range" min="5" max="50" value="10" data-setting="size" title="Highlighter Size">
            <input type="range" min="0.1" max="1" step="0.1" value="0.8" data-setting="opacity" title="Opacity">
          </div>
          <!-- Text Tool Settings -->
          <div data-tool="text">
            <select data-setting="fontFamily" title="Font Family">
              <option value="Arial">Arial</option>
              <option value="Times">Times</option>
              <option value="Helvetica">Helvetica</option>
            </select>
            <input type="range" min="8" max="72" value="16" data-setting="fontSize" title="Font Size">
          </div>
          <!-- Shapes Tool Settings -->
          <div data-tool="shapes">
            <div>
              <div>
                <img src="/src/assets/icons/coursebuilder/tools/shapes/shape-rectangle.svg" data-shape="rectangle"
                  alt="Rectangle">
                <span>Rectangle</span>
                <img src="/src/assets/icons/coursebuilder/tools/shapes/shape-circle.svg" data-shape="circle"
                  alt="Circle">
                <span>Circle</span>
                <img src="/src/assets/icons/coursebuilder/tools/shapes/shape-triangle.svg" data-shape="triangle"
                  alt="Triangle">
                <span>Triangle</span>
              </div>
              <input type="range" min="1" max="10" value="2" data-setting="strokeWidth" title="Stroke Width">
            </div>
            <!-- Eraser Tool Settings -->
            <input type="range" min="5" max="50" value="20" data-setting="size" title="Eraser Size">
          </div>
        </div>
      </div>
    </section> <!-- Preview Section (no aside navigation) -->
    <section id="preview">
      <article>
        <section>
          <p>Course preview will be displayed here...</p>
        </section>
      </article>
    </section>
    <!-- Launch Section (no aside navigation) -->
    <section id="launch">
      <article>
        <section>
          <p>Course launch options will be available here...</p>
        </section>
      </article>
    </section>
  </main>
  <!-- Core application scripts -->
  <script type="module" src="/src/scripts/app.ts"></script>
  <!-- PIXI and PixiJS devtools -->
  <script type="module" src="/src/scripts/coursebuilder/devtools-setup.ts"></script>
  <!-- CourseBuilder application -->
  <script type="module" src="/src/scripts/coursebuilder/coursebuilder.ts"></script>
  <!-- Backend services -->
  <script type="module" src="/src/scripts/backend/courses/index.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/classificationFormHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/createTemplate.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/templates/templateConfigHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/templates/templatePreviewHandler.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/scheduleCourse.ts"></script>
  <script type="module" src="/src/scripts/backend/courses/marginSettings.ts"></script>
</body>

</html>