// ==========================================================================
// CREATE GRID
// ==========================================================================

.engine {
    display: grid;
    grid-template-columns: 70px 300px 1fr 250px;
    grid-template-rows: 60px 1fr;
    height: calc(100vh - 8vh); // Constrain to available viewport space minus header
    width: 100%;
    gap: 0.5rem;

    // Common styling for all grid items
    >* {
        background: var(--color-background); // Even lighter - pure white
        border-radius: var(--radius-large);
        border: 1px solid var(--color-neutral-200); // Lighter border for modern look
        padding: var(--spacing-3);
        box-shadow:
            0 1px 3px rgba(0, 0, 0, 0.05),
            0 1px 2px rgba(0, 0, 0, 0.1); // Softer, more subtle shadow
    }

    // ==========================================================================
    // ROW 1 - SPECIFIC POSITIONING & LAYOUT
    // ==========================================================================

    &__mode {
        grid-column: 1 / 3;
        grid-row: 1;
        display: flex;
    }

    &__tools {
        grid-column: 3;
        grid-row: 1;
    }

    &__nav {
        grid-column: 4;
        grid-row: 1;
    }

    &__nav-course {
        display: flex;

    }

    // ==========================================================================
    // ROW 2 - SPECIFIC POSITIONING & LAYOUT
    // ==========================================================================

    &__media {
        grid-column: 1;
        grid-row: 2;
    
    }

    &__search {
        grid-column: 2;
        grid-row: 2;
        display: flex;
        align-items: flex-start; // Align to top instead of center
        padding: var(--spacing-2); // Reduce padding to give input more room
    }

    &__canvas {
        grid-column: 3;
        grid-row: 2;
        background: var(--color-neutral-100); // Slightly grey container area
        overflow: auto; // Enable scrolling for large content
        padding: 2rem;
        display: flex;
        justify-content: center; // Center the canvas horizontally
        align-items: flex-start; // Align to top vertically
        box-shadow:
            inset 6px 6px 12px rgba(0, 0, 0, 0.1),
            inset -6px -6px 12px rgba(255, 255, 255, 0.8),
            2px 2px 6px rgba(0, 0, 0, 0.05);
    }

    // Canvas placeholder styling
    &__placeholder {
        width: 794px; // A4 width at 96dpi
        height: 1123px; // A4 height at 96dpi
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        border: 2px dashed var(--color-neutral-300);
        border-radius: var(--radius-large);
        background: var(--color-background); // Keep placeholder white to match actual canvas
        flex-shrink: 0; // Prevent placeholder from shrinking
    }

    &__preview {
        grid-column: 4;
        grid-row: 2;
        overflow-y: auto;
    }
}

// ==========================================================================
// ==========================================================================
// TOOLS - BEM STYLING FOR TOOL LAYOUT AND SETTINGS
// ==========================================================================

.tools {
    display: flex;
    flex-direction: row;
    align-items: center;

    gap: var(--spacing-3);

    &__selection {
        display: flex;
        gap: var(--spacing-3);
    }

    // Tool selection items - layout structure only
    &__item {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-2);
        align-items: center;
        justify-content: center;
    }

    &__options {
        flex: 1;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: var(--spacing-3);
        margin-left: var(--spacing-4);
        overflow: visible;

        // Override layout for tool items in options area (settings should be horizontal)
        .tools__item {
            flex-direction: row;
            width: auto;
            height: auto;
            gap: var(--spacing-2);
        }
    }
}

// ==========================================================================
// MODE, MEDIA, NAV-COURSE - ACTIVE STATE STYLING
// ==========================================================================

.mode,
.media,
.nav-course,
.tools {
    &__item {
        &--active {
            .icon--base {
                background: var(--color-primary-100);
                border-color: var(--color-primary-300);
                box-shadow:
                    0 2px 4px rgba(26, 140, 255, 0.15),
                    0 1px 2px rgba(26, 140, 255, 0.1);

                &:hover {
                    background: var(--color-primary-200);
                    border-color: var(--color-primary-400);
                    transform: translateY(-1px);
                    box-shadow:
                        0 3px 6px rgba(26, 140, 255, 0.2),
                        0 2px 4px rgba(26, 140, 255, 0.15);
                }
            }


        }
    }
}