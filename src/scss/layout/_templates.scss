// ==========================================================================
// TEMPLATES LAYOUT - BEM Methodology
// ==========================================================================
@use '../abstracts/mixins' as *;

// ==========================================================================
// TEMPLATE WRAPPER BLOCK
// ==========================================================================
.template {
  display: contents;

  &__buttons {
    grid-column: 1 / -1;
    display: grid;
    grid-auto-flow: column;
    gap: var(--spacing-2);
    justify-content: start;
    align-items: center;
    padding-block: var(--spacing-1);
    align-self: start;

    .button {
      min-width: max-content;
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-small);
      height: auto;
    }
  }

  &__config,
  &__preview {
    display: grid;
    grid-template-rows: auto 1fr;
    gap: var(--spacing-3);
    min-height: 0;
    align-content: start;
  }

  &__content {
    overflow-y: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
    scrollbar-gutter: stable;
    display: grid;
    gap: var(--spacing-4);
    align-content: start;
  }
}

// ==========================================================================
// TEMPLATE BLOCKS (Generated Content)
// ==========================================================================
.template-blocks {
  display: grid;
  gap: var(--spacing-4);
}

.block-config {
  border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-medium);
  padding: var(--spacing-4);
  background: var(--color-background);

  &__title {
    margin: 0 0 var(--spacing-3) 0;
    padding: var(--spacing-3);
    background: var(--color-neutral-100);
    border-radius: var(--radius-small);
    font-weight: var(--font-weight-semibold);
  }

  &__options {
    @include grid-responsive(150px, var(--spacing-2) var(--spacing-3));
    margin-top: var(--spacing-3);
  }
}

// ==========================================================================
// TEMPLATE PREVIEW
// ==========================================================================
.template-preview {
  display: grid;
  gap: var(--spacing-4);

  &__block {
    border: 1px solid var(--color-neutral-200);
    border-radius: var(--radius-medium);
    background: var(--color-background);
  }

  &__header {
    margin: 0;
    padding: var(--spacing-3) var(--spacing-4);
    font-size: var(--font-size-medium);
    font-weight: var(--font-weight-semibold);
    background: var(--color-neutral-50);
    border-bottom: 1px solid var(--color-neutral-200);
    text-transform: capitalize;
  }

  &__content {
    padding: var(--spacing-4);
    display: grid;
    gap: var(--spacing-3);
  }

  // MODIFIERS for color-coding
  &--type-header {
    .template-preview__block {
      border-left: 4px solid var(--color-primary-500);
    }
    .template-preview__header {
      background: linear-gradient(135deg, var(--color-primary-50), var(--color-primary-100));
      color: var(--color-primary-800);
    }
  }
  &--type-program {
    .template-preview__block {
      border-left: 4px solid var(--color-success-500);
    }
    .template-preview__header {
      background: linear-gradient(135deg, var(--color-success-50), var(--color-success-100));
      color: var(--color-success-800);
    }
  }
  &--type-content {
    .template-preview__block {
      border-left: 4px solid var(--color-info-500);
    }
    .template-preview__header {
      background: linear-gradient(135deg, var(--color-info-50), var(--color-info-100));
      color: var(--color-info-800);
    }
  }
  &--type-assignment {
    .template-preview__block {
      border-left: 4px solid var(--color-purple-500);
    }
    .template-preview__header {
      background: linear-gradient(135deg, var(--color-purple-50), var(--color-purple-100));
      color: var(--color-purple-800);
    }
  }
}

// ==========================================================================
// PREVIEW TABLE STYLING
// ==========================================================================
.preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-size-small);
  border: 1px solid var(--color-neutral-300);
  border-radius: var(--radius-medium);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden; // Ensures border-radius is respected

  &__header-cell {
    padding: var(--spacing-4);
    text-align: left;
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    border-bottom: 2px solid var(--color-neutral-300);
    background: linear-gradient(135deg, var(--color-primary-50), var(--color-primary-100));
  }

  &__body-row {
    transition: background-color var(--transition-fast);
    &:nth-child(even) {
      background: var(--color-neutral-25);
    }
    &:hover {
      background: var(--color-primary-50);
    }
  }

  &__body-cell {
    padding: var(--spacing-4);
    color: var(--color-text-secondary);
    border-bottom: 1px solid var(--color-neutral-200);
    vertical-align: top;
    line-height: 1.5;

    &:first-child {
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
      width: 30%;
    }
  }
}
