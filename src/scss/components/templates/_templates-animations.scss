@use "../../abstracts/variables" as *;

// ==========================================================================
// TEMPLATE ANIMATIONS AND TRANSITIONS
// ==========================================================================

// Keyframe animations
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

// Template-specific transitions
.template-card {
  transition: all 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: $shadow-lg;
  }
}

.template-block {
  transition: all 0.2s ease;

  &--animated {
    animation: fadeIn 0.3s ease-out;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: $shadow-md;
  }
}

.template-list-item {
  transition: all 0.2s ease;

  &--entering {
    animation: slideIn 0.3s ease-out;
  }

  &:hover {
    background: rgba($primary-color, 0.02);
    border-left-color: $primary-color;
  }
}

.template-modal {
  transition: opacity 0.3s ease;

  &__content {
    transition: transform 0.3s ease;
  }

  &--entering {
    animation: scaleIn 0.3s ease-out;
  }
}

.template-button {
  transition: all 0.2s ease;

  &:hover {
    transform: translateY(-1px);
    box-shadow: $shadow-sm;
  }

  &:active {
    transform: translateY(0);
  }

  &--loading {
    .loading-spinner {
      animation: spin 1s linear infinite;
    }
  }
}

.template-form {
  .form-group {
    &--animated {
      animation: fadeIn 0.4s ease-out;
    }
  }

  .form-input,
  .form-textarea,
  .form-select {
    transition: all 0.2s ease;

    &:focus {
      transform: scale(1.01);
    }
  }
}

.template-sidebar {
  transition: transform 0.3s ease;

  &--collapsed {
    transform: translateX(-100%);
  }

  &--expanding {
    animation: slideIn 0.3s ease-out;
  }
}

.template-toolbar {
  .tool-button {
    transition: all 0.15s ease;

    &:hover {
      transform: scale(1.05);
    }

    &:active {
      transform: scale(0.98);
    }
  }
}

.template-drag-item {
  transition: all 0.2s ease;

  &.dragging {
    transform: rotate(3deg) scale(1.02);
    opacity: 0.8;
    z-index: 1000;
  }

  &.drag-over {
    transform: scale(1.02);
    box-shadow: 0 0 0 2px $primary-color;
  }
}

.template-preview {
  .preview-frame {
    transition: all 0.3s ease;

    &--loading {
      opacity: 0.7;
      
      &::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 32px;
        height: 32px;
        border: 3px solid $gray-300;
        border-top-color: $primary-color;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
    }
  }
}

// Loading states
.template-loading {
  &__spinner {
    animation: spin 1s linear infinite;
  }

  &__pulse {
    animation: pulse 2s ease-in-out infinite;
  }

  &__skeleton {
    background: linear-gradient(
      90deg,
      $gray-200 25%,
      $gray-100 50%,
      $gray-200 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

// Success and error animations
.template-success {
  animation: fadeIn 0.5s ease-out, pulse 0.3s ease-in-out 0.5s;
}

.template-error {
  animation: fadeIn 0.5s ease-out;
  
  &--shake {
    animation: shake 0.5s ease-in-out;
  }
}

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

// Stagger animations for lists
.template-list {
  &--staggered {
    .template-list-item {
      opacity: 0;
      animation: fadeIn 0.3s ease-out forwards;
      
      @for $i from 1 through 10 {
        &:nth-child(#{$i}) {
          animation-delay: #{$i * 0.1}s;
        }
      }
    }
  }
}

// Performance optimizations
.template-container {
  // Enable hardware acceleration for smooth animations
  will-change: transform, opacity;
}

// Reduce motion for accessibility
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
